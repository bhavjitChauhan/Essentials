/**
 * Essentials.
 *
 * The Essentials library provides utility functions for the Khan Academy
 * Processing Environment.
 *
 * @link https://github.com/bhavjitChauhan/Essentials
 * @file Minified CDN Essentials Build
 * @author Bhavjit Chauhan
 */

_environment_=this instanceof Window?"CDN":"KA",_console_style_="font-family:system-ui;font-size:0.75rem;",_core_initialized_="undefined"!=typeof ESSENTIALS_CORE,ESSENTIALS_CORE=!0,ESSENTIALS_VERSION="2.0.0",ESSENTIALS_ASCII="\n    _/_/_/_/    _/_/_/    _/_/_/  _/_/_/_/  _/      _/  _/_/_/_/_/  _/_/_/    _/_/    _/          _/_/_/\n   _/        _/        _/        _/        _/_/    _/      _/        _/    _/    _/  _/        _/\n  _/_/_/      _/_/      _/_/    _/_/_/    _/  _/  _/      _/        _/    _/_/_/_/  _/          _/_/\n _/              _/        _/  _/        _/    _/_/      _/        _/    _/    _/  _/              _/\n_/_/_/_/  _/_/_/    _/_/_/    _/_/_/_/  _/      _/      _/      _/_/_/  _/    _/  _/_/_/_/  _/_/_/\n\n",_silent_="undefined"!=typeof _silent_&&_silent_,_silent_||_core_initialized_||console.info(`%cESSENTIALS\n%cThe Khan Academy utility library.\n\n${_environment_} Build\nVersion ${ESSENTIALS_VERSION}\nCopyright Â© 2021 Bhavjit Chauhan\nhttps://github.com/bhavjitChauhan/Essentials`,"color:transparent;\nfont-size:3rem;\nbackground-image: url('https://github.com/bhavjitChauhan/Essentials/blob/master/logo.png?raw=true');\nbackground-position:center;\nbackground-repeat: no-repeat;\nbackground-size:contain;",_console_style_),_eval=eval,p=Processing.instances[0],[LEFT,RIGHT,TOP,BOTTOM,UP,DOWN]=[p.LEFT,p.RIGHT,p.TOP,p.BOTTOM,p.UP,p.DOWN],TOP_LEFT=1,TOP_RIGHT=2,BOTTOM_RIGHT=3,BOTTOM_LEFT=4,WIDTH=p.width,HEIGHT=p.height,HALF_WIDTH=WIDTH/2,HALF_HEIGHT=HEIGHT/2,ctx=p.externals.context,WHITE=4294967295,SILVER=4290822336,GREY=4286611584,BLACK=4278190080,RED=4294901760,MAROON=4286578688,ORANGE=4294944e3,YELLOW=4294967040,OLIVE=4286611456,LIME=4278255360,GREEN=4278222848,AQUA=4278255615,TEAL=4278222976,BLUE=4278190335,NAVY=4278190208,FUCHSIA=4294902015,PURPLE=4286578816,TRANSPARENT=16777215,_hash=(e,t=0)=>{const r=2654435761,o=2246822519,a=3266489917,n=668265263,p=374761393,s=e;let l=t+p&4294967295,i=0;if(s.length>=16){const a=[t+r+o&4294967295,t+o&4294967295,t+0&4294967295,t-r&4294967295],n=e,p=n.length-16;let s=0;for(i=0;(4294967280&i)<=p;i+=4){const e=i,t=(n[e+0]+(n[e+1]<<8))*o+((n[e+2]+(n[e+3]<<8))*o<<16);let p=a[s]+t&4294967295;p=p<<13|p>>>19;const l=65535&p,c=p>>>16;a[s]=l*r+(c*r<<16)&4294967295,s=s+1&3}l=(a[0]<<1|a[0]>>>31)+(a[1]<<7|a[1]>>>25)+(a[2]<<12|a[2]>>>20)+(a[3]<<18|a[3]>>>14)&4294967295}l=l+e.length&4294967295;const c=e.length-4;for(;i<=c;i+=4){const e=i;l=l+((s[e+0]+(s[e+1]<<8))*a+((s[e+2]+(s[e+3]<<8))*a<<16))&4294967295,l=l<<17|l>>>15,l=(65535&l)*n+((l>>>16)*n<<16)&4294967295}for(;i<s.length;++i){l+=s[i]*p,l=l<<11|l>>>21,l=(65535&l)*r+((l>>>16)*r<<16)&4294967295}return l^=l>>>15,l=((65535&l)*o&4294967295)+((l>>>16)*o<<16),l^=l>>>13,l=((65535&l)*a&4294967295)+((l>>>16)*a<<16),(l<0?l+4294967296:l).toString(16)},_pointOnRect=(e,t,r)=>{for(r=-r;r<-Math.PI;)r+=p.TAU;for(;r>Math.PI;)r-=p.TAU;const o=Math.atan2(t,e),a=Math.tan(r);let n;n=r>-o&&r<=o?1:r>o&&r<=Math.PI-o?2:r>Math.PI-o||r<=-(Math.PI-o)?3:4;const s={x:e/2,y:t/2};let l=1,i=1;switch(n){case 1:case 2:i=-1;break;case 3:case 4:l=-1}return 1==n||3==n?(s.x+=l*(e/2),s.y+=i*(e/2)*a):(s.x+=l*(t/(2*a)),s.y+=i*(t/2)),s},clearLogs=()=>p._clearLogs(),noop=function(){},showGraphics=()=>drawGraphics(),attempt=(e,...t)=>{try{return e(...t)}catch(e){return e instanceof Error?e:new Error(e)}},chainAsync=e=>{let t=0;const r=_.last(e),o=()=>{const a=e[t++];a===r?a():a(o)};o()},clean=e=>{const t=e.toString().replace(/__env__\.KAInfiniteLoopCount\+\+;/g,"").replace(/if \(__env__\.KAInfiniteLoopCount > 1000\) {[\s]+__env__\.KAInfiniteLoopProtect\('[^']*'\);[^}]+}/g,"").replace(/__env__\.PJSOutput\.applyInstance\((__env__\.\S+), '\S+'\)/g,"new $1");return Object.constructor(`return (function(__env__) {return ${t};});`)()(p)},complement=e=>(...t)=>!e(...t),drawGraphics=(e,t,r,o,a,n=p.P2D)=>{const s=p.createGraphics(r,o,n);a.call(s),p.image(s,e,t)},evalPJS=e=>_eval(`with (p) ${e}`),generateID=(e=8)=>{const t=e%2!=0,r=_eval(`new Uint8Array(Math.ceil(${e} / 2))`);crypto.getRandomValues(r);const o=Array.from(r,(e=>e.toString(16).padStart(2,"0"))).join("");return t?o.slice(0,-1):o},generateUUID=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(_eval("new Uint8Array(1)"))[0]&15>>e/4).toString(16))),getColonTime=function(){return(new Date).toTimeString().slice(0,8)},inherit=(e,t)=>{Object.setPrototypeOf(e.prototype,t.prototype),e.prototype.constructor=e,t.prototype.constructor===Object&&(t.prototype.constructor=t)},isEmptyFunction=e=>_.isFunction(e)&&/^function[^{]*[{]\s*[}]\s*$/.test(Function.prototype.toString.call(e)),isFont=e=>e instanceof p.PFont,isImage=e=>e instanceof p.PImage,isSound=e=>e.audio instanceof Audio,mostPerformant=(e,t=1e4,r=!1)=>{const o=e.map((e=>{const r=performance.now();for(let r=0;r<t;r++)e();return performance.now()-r}));return r?o:o.indexOf(Math.min(...o))},pop=()=>{p.popStyle(),ctx.restore()},printf=function(e,...t){e=e.toString();for(const r of t)e=e.replace(/(?<!\\)%/,r);e=e.replaceAll(/\\%/g,"%"),p.println(e)},push=()=>{p.pushStyle(),ctx.save()},randomInt=(e,t)=>_.random(e,t),restart=()=>{"undefined"!=typeof COLOR_ESSENTIALS&&(noShadow(),shadowBlur(0),shadowOffset(0,0)),"undefined"!=typeof SHAPE_ESSENTIALS&&(noStrokeDash(),strokeDashOffset(0)),"undefined"!=typeof EXTERNAL_ESSENTIALS&&(clearElements(),closeLog(),exitPointerLock(),forceAllowScroll()),p.colorMode(p.RGB,255),p.draw=noop,p.Program.restart()},roundTo=(e,t)=>t?Math.round(e/t)*t:e,timeTaken=(e,t="default")=>{console.time(`timeTaken#${t}`);const r=e();return console.timeEnd(`timeTaken#${t}`),r},_color_initialized_="undefined"!=typeof COLOR_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Color Essentials depends on the Essentials Core."):(COLOR_ESSENTIALS=!0,_silent_||_color_initialized_||console.info("%cColor Essentials",_console_style_)),BRIGHTNESS="brightness",LUMINANCE="brightness",CONTRAST="contrast",DROP_SHADOW="drop-shadow",GRAYSCALE=p.GRAY,HUE_ROTATE="hue-rotate",OPACITY="opacity",SATURATE="saturate",SEPIA="sepia",RGB_COLOR_RANGE=[255,255,255,255],HSB_COLOR_RANGE=[360,100,100,100],MEDIUM_VIOLET_RED=4291237253,DEEP_PINK=4294907027,PALE_VIOLET_RED=4292571283,HOT_PINK=4294928820,LIGHT_PINK=4294948545,PINK=4294951115,DARK_RED=4287299584,RED=4294901760,FIRE_BRICK=4289864226,CRIMSON=4292613180,INDIAN_RED=4291648604,LIGHT_CORAL=4293951616,SALMON=4294606962,DARK_SALMON=4293498490,LIGHT_SALMON=4294942842,ORANGE_RED=4294919424,TOMATO=4294927175,DARK_ORANGE=4294937600,CORAL=4294934352,ORANGE=4294944e3,DARK_KHAKI=4290623339,GOLD=4294956800,KHAKI=4293977740,PEACH_PUFF=4294957753,YELLOW=4294967040,PALE_GOLDENROD=4293847210,MOCCASIN=4294960309,PAPAYA_WHIP=4294963157,LIGHT_GOLDENROD_YELLOW=4294638290,LEMON_CHIFFON=4294965965,LIGHT_YELLOW=4294967264,MAROON=4286578688,BROWN=4289014314,SADDLE_BROWN=4287317267,SIENNA=4288696877,CHOCOLATE=4291979550,DARK_GOLDENROD=4290283019,PERU=4291659071,ROSY_BROWN=4290547599,GOLDENROD=4292519200,SANDY_BROWN=4294222944,TAN=4291998860,BURLY_WOOD=4292786311,WHEAT=4294303411,NAVAJO_WHITE=4294958765,BISQUE=4294960324,BLANCHED_ALMOND=4294962125,CORNSILK=4294965468,DARK_GREEN=4278215680,GREEN=4278222848,DARK_OLIVE_GREEN=4283788079,FOREST_GREEN=4280453922,SEA_GREEN=4281240407,OLIVE=4286611456,OLIVE_DRAB=4285238819,MEDIUM_SEA_GREEN=4282168177,LIME_GREEN=4281519410,LIME=4278255360,SPRING_GREEN=4278255487,MEDIUM_SPRING_GREEN=4278254234,DARK_SEA_GREEN=4287609999,MEDIUM_AQUAMARINE=4284927402,YELLOW_GREEN=4288335154,LAWN_GREEN=4286381056,CHARTREUSE=4286578432,LIGHT_GREEN=4287688336,GREEN_YELLOW=4289593135,PALE_GREEN=4288215960,TEAL=4278222976,DARK_CYAN=4278225803,LIGHT_SEA_GREEN=4280332970,CADET_BLUE=4284456608,DARK_TURQUOISE=4278243025,MEDIUM_TURQUOISE=4282962380,TURQUOISE=4282441936,AQUA=4278255615,CYAN=4278255615,AQUAMARINE=4286578644,PALE_TURQUOISE=4289720046,LIGHT_CYAN=4292935679,NAVY=4278190208,DARK_BLUE=4278190219,MEDIUM_BLUE=4278190285,BLUE=4278190335,MIDNIGHT_BLUE=4279834992,ROYAL_BLUE=4282477025,STEEL_BLUE=4282811060,DODGER_BLUE=4280193279,DEEP_SKY_BLUE=4278239231,CORNFLOWER_BLUE=4284782061,SKY_BLUE=4287090411,LIGHT_SKY_BLUE=4287090426,LIGHT_STEEL_BLUE=4289774814,LIGHT_BLUE=4289583334,POWDER_BLUE=4289781990,INDIGO=4283105410,PURPLE=4286578816,DARK_MAGENTA=4287299723,DARK_VIOLET=4287889619,DARK_SLATE_BLUE=4282924427,BLUE_VIOLET=4287245282,DARK_ORCHID=4288230092,FUCHSIA=4294902015,MAGENTA=4294902015,SLATE_BLUE=4285160141,MEDIUM_SLATE_BLUE=4286277870,MEDIUM_ORCHID=4290401747,MEDIUM_PURPLE=4287852763,ORCHID=4292505814,VIOLET=4293821166,PLUM=4292714717,THISTLE=4292394968,LAVENDER=4293322490,REBECCA_PURPLE=4284887961,MISTY_ROSE=4294960353,ANTIQUE_WHITE=4294634455,LINEN=4294635750,BEIGE=4294309340,WHITE_SMOKE=4294309365,LAVENDER_BLUSH=4294963445,OLD_LACE=4294833638,ALICE_BLUE=4293982463,SEASHELL=4294964718,GHOST_WHITE=4294506751,HONEYDEW=4293984240,FLORAL_WHITE=4294966e3,AZURE=4293984255,MINT_CREAM=4294311930,SNOW=4294966010,IVORY=4294967280,WHITE=4294967295,BLACK=4278190080,DARK_SLATE_GRAY=DARK_SLATE_GREY=4281290575,DIM_GRAY=DIM_GREY=4285098345,SLATE_GRAY=SLATE_GREY=4285563024,GREY=4286611584,LIGHT_SLATE_GRAY=LIGHT_SLATE_GREY=4286023833,DARK_GRAY=DARK_GREY=4289309097,SILVER=4290822336,LIGHT_GRAY=LIGHT_GREY=4292072403,GAINSBORO=4292664540,_appendFilter=e=>{if("none"==ctx.filter)return ctx.filter=e;ctx.filter+=e},_createColor=(e,t=getColorMode(),r=t)=>{const o=r==(t==p.RGB?p.HSB:p.RGB);let a=getAlphaRange();return r!=t&&(a=t==p.RGB?RGB_COLOR_RANGE[3]:HSB_COLOR_RANGE[3]),e=_parseColorArray(e,a),o&&(p.pushStyle(),presetColorMode(t)),result=p.color.apply(null,e),o&&p.popStyle(),result},_parseColorArray=(e,t=getAlphaRange(),r=!1)=>{switch(_.isNumber(e)&&(e=[e]),e.length){case 1:e=[e[0],e[0],e[0],r?e[0]:t];break;case 2:e=[e[0],e[0],e[0],e[1]];break;case 3:e.push(t)}return e},clearEffects=()=>ctx.filter="none",getBlueRange=()=>p.blue(WHITE),getAlphaRange=()=>p.alpha(WHITE),getBrightnessRange=()=>getBlueRange(),getGreenRange=()=>p.green(WHITE),getHueRange=()=>getRedRange(),getRedRange=()=>p.red(WHITE),getSaturationRange=()=>getGreenRange(),getShadowBlur=()=>ctx.shadowBlur,getShadow=()=>hexToRGB(ctx.shadowColor),isDefaultColorRange=()=>getColorRange()==RGB_COLOR_RANGE,getShadowOffset=()=>[ctx.shadowOffsetX,ctx.shadowOffsetY],noShadow=()=>shadow(TRANSPARENT),angularGradient=(e,t,o,a,n,s,l=0,i=5)=>{l-=90;const c=Math.ceil(10*p.degrees(Math.atan(i/Math.max(o,a))))/10;if(p.pushStyle(),1==i){p.strokeWeight(1.5);for(let i=l;i<l+359;i+=c)p.stroke(p.lerpColor(n,s,(i-l)/360)),r=p.radians(i),p.line(e+o/2,t+a/2,p.map(Math.cos(r),-1,1,e,e+o),p.map(Math.sin(r),-1,1,t,t+a))}else{p.strokeWeight(1);for(let r=l;r<l+359;r+=c){const i=p.lerpColor(n,s,(r-l)/360);p.stroke(i),p.fill(i),r1=p.radians(r),r2=p.radians(r-c),p.triangle(e+o/2,t+a/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+a),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+a))}}p.popStyle()},circularGradient=(e,t,o,a,n,s,l=0,i=5)=>{const c=Math.ceil(10*p.degrees(Math.atan(i/Math.max(o,a))))/10;if(p.pushStyle(),1==i){p.strokeWeight(1.5);for(let i=l-1;i<l+180;i+=c)p.stroke(p.lerpColor(n,s,Math.abs((i-l)/180))),r=p.radians(i),p.line(e+o/2,t+a/2,p.map(Math.cos(r),-1,1,e,e+o),p.map(Math.sin(r),-1,1,t,t+a));for(let i=l-1;i>l-180;i-=c)p.stroke(p.lerpColor(n,s,Math.abs((i-l)/180))),r=p.radians(i),p.line(e+o/2,t+a/2,p.map(Math.cos(r),-1,1,e,e+o),p.map(Math.sin(r),-1,1,t,t+a))}else{p.strokeWeight(1);for(let r=l-1;r<l+180;r+=c){const i=p.lerpColor(n,s,Math.abs((r-l)/180));p.stroke(i),p.fill(i),r1=p.radians(r),r2=p.radians(r-c),p.triangle(e+o/2,t+a/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+a),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+a))}r1=p.radians(l-180),r2=p.radians(l-180-c),p.stroke(s),p.fill(s),p.triangle(e+o/2,t+a/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+a),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+a));for(let r=l-1;r>l-180;r-=c){const i=p.lerpColor(n,s,Math.abs((r-l)/180));p.stroke(i),p.fill(i),r1=p.radians(r),r2=p.radians(r-c),p.triangle(e+o/2,t+a/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+a),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+a))}}p.popStyle()},p.blur=(e=5)=>{_.isNumber(e)&&(e=`${e}px`),_appendFilter(`blur(${e})`)},contrast=e=>_appendFilter(`contrast(${e}%)`),dropShadow=(e,t=e,r=5,o="#000")=>{_.isNumber(o)&&(o=RGBToHex(o)),_appendFilter(`drop-shadow(${e}px ${t}px ${r}px ${o})`)},effect=(e,...t)=>{switch(e){case p.BLUR:return p.blur(...t);case BRIGHTNESS:case LUMINANCE:return luminance(...t);case CONTRAST:return contrast(...t);case DROP_SHADOW:return dropShadow(...t);case p.GRAY:case GRAYSCALE:return grayscale(...t);case HUE_ROTATE:return hueRotate(...t);case p.INVERT:return invert(...t);case OPACITY:return opacity(...t);case SATURATE:return saturate(...t);case SEPIA:return sepia(...t)}_appendFilter(e)},fastBlur=(e=10,t=0,r=0,o=WIDTH,a=o||HEIGHT)=>{t<0&&(o+=t,t=0),r<0&&(a+=r,r=0),e=p.constrain(e,0,Math.min(o,a)),p.image(p.get(t,r,o,a),t,r,o/e,a/e),p.image(p.get(t,r,o/e,a/e),t,r,o,a)},getColorMode=()=>-65536==p.color(getRedRange(),0,0)?p.RGB:p.HSB,getColorRange=()=>[p.red,p.green,p.blue,p.alpha].map((e=>e.call(null,WHITE))),getFill=(e=!0)=>(e&&p.rect(0,0,"%"),hexToRGB(ctx.fillStyle)),grayscale=(e=100)=>_appendFilter(`grayscale(${e}%)`),getStroke=(e=!0)=>(e&&p.rect(0,0,"%"),hexToRGB(ctx.strokeStyle)),hexToHSB=(e,t=!0)=>t?hexToRGB(e):RGBToHSB.apply(p,hexToRGB(e,!1)),hexToRGB=(e,t=!0)=>{const r=getColorMode();switch((e=e.replace("#","")).length){case 3:case 6:e=e.replace(/^([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,r,o)=>t+t+r+r+o+o));break;case 4:case 8:e=e.replace(/^([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,r,o,a)=>t+t+r+r+o+o+a+a))}let o=e.match(/.{2}/g).map((e=>parseInt(e,16)));3==o.length&&o.push(RGB_COLOR_RANGE[3]),isDefaultColorRange()||r!=p.RGB||(o=mapColorRange(o));let a=o;return t&&(a=_createColor(o,p.RGB,r)),a},HSBToHex=(...e)=>{let t=!0,r=!0;_.every(_.last(e,2),_.isBoolean)?(r=e.pop(),t=e.pop()):_.isBoolean(_.last(e))&&(t=e.pop());const o=!isDefaultColorRange();o&&p.pushStyle(),presetColorMode(p.RGB);const a=HSBToRGB(...e).map((e=>Math.round(e)));return o&&p.popStyle(),RGBToHex(...a,t,r)},HSBToRGB=(...e)=>{const t=getColorRange(),r=getColorMode()==p.RGB?t:RGB_COLOR_RANGE;let o,a,n,s;switch(e.length){case 1:{const t=!isDefaultColorRange();t&&(p.pushStyle(),presetColorMode(p.HSB)),[o,a,n,s]=toHSB(e[0]),t&&p.popStyle(),o/=60,a/=100,n/=100,s/=100;break}case 3:case 4:4==e.length&&(s=e.pop()/HSB_COLOR_RANGE[3]),o=e.shift()/60,[a,n]=e.map(((e,t)=>e/HSB_COLOR_RANGE[t+1]))}f=(e,t=(e+o)%6)=>n-n*a*Math.max(Math.min(t,4-t,1),0);let l=[f(5),f(3),f(1),s||1];return l=l.map(((e,t)=>e*r[t])),l},hueRotate=e=>_appendFilter(`hue-rotate(${e}${"degrees"==p.angleMode?"deg":"rad"})`),invert=(e=100)=>_appendFilter(`invert(${e}%)`),linearGradient=e=>{let{x:t,y:r,width:o,height:a,stops:n,angle:s,x0:l,y0:i,x1:c,y1:h}=e;if(a=a||o,_.isNumber(s)){"degrees"==p.angleMode&&(s=p.radians(s));const e=_pointOnRect(o,a,s);l=l||t+o-e.x,i=i||r+a-e.y,c=c||t+e.x,h=h||r+e.y}push();const E=ctx.createLinearGradient(l,i,c,h);_.every(n,_.isArray)||(n=n.map(((e,t,r)=>[p.norm(t,0,r.length-1),e])));for(const e of n)_.isNumber(e[1])&&(e[1]=RGBToHex(e[1],!1)),E.addColorStop(...e);ctx.fillStyle=E,ctx.fillRect(t,r,o,a),pop()},luminance=e=>_appendFilter(`brightness(${e}%)`),mapColorRange=(e,t)=>{const r=getColorRange();return t?(t=_parseColorArray(t,r[3],!0),e=_parseColorArray(e,r[3]).map(((e,o)=>p.map(e,0,r[o],0,t[o])))):e=_parseColorArray(e,255).map(((e,t)=>p.map(e,0,255,0,r[t]))),e},opacity=e=>_appendFilter(`opacity(${e}%)`),presetColorMode=e=>{switch(e||(e=getColorMode()==p.RGB?p.HSB:p.RGB),e){case p.RGB:p.colorMode(p.RGB,255);break;case p.HSB:p.colorMode(p.HSB,360,100,100,100)}},radialGradient=e=>{let{x:t,y:r,width:o,height:a,stops:n,x0:s,y0:l,r0:i,x1:c,y1:h,r1:E}=e;a=a||o;const R=t+o/2,S=r+a/2;_.isNumber(s)||(s=R),_.isNumber(l)||(l=S),i=i||0,_.isNumber(c)||(c=R),_.isNumber(h)||(h=S),E=E||o/2,push();const u=ctx.createRadialGradient(s,l,i,c,h,E);_.every(n,_.isArray)||(n=n.map(((e,t,r)=>[p.norm(t,0,r.length-1),e])));for(const e of n)_.isNumber(e[1])&&(e[1]=RGBToHex(e[1],!1)),u.addColorStop(...e);ctx.fillStyle=u,ctx.fillRect(t,r,o,a),pop()},RGBToHex=(...e)=>{let t,r=!0,o=!0;switch(_.every(_.last(e,2),_.isBoolean)?(o=e.pop(),r=e.pop()):_.isBoolean(_.last(e))&&(r=e.pop()),e.length){case 1:{const r=p.alpha(e[0]);t=p.hex(e[0],6)+(r!=RGB_COLOR_RANGE[3]?r.toString(16).padStart(2,"0"):"");break}case 3:case 4:t=((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1),4==e.length&&e[3]!=RGB_COLOR_RANGE[3]&&(t+=e[3].toString(16).padStart(2,"0"))}return r&&(8==t.length&&(t=t.replace(/(\w)\1(\w)\2(\w)\3(\w)\4/,"$1$2$3$4")),6==t.length&&(t=t.replace(/(\w)\1(\w)\2(\w)\3/,"$1$2$3"))),(o?"#":"")+t.toUpperCase()},RGBToHSB=(...e)=>{const t=getColorRange(),r=getColorMode()==p.HSB?t:HSB_COLOR_RANGE,o=[e=>p.map(e,0,6,0,r[0]),e=>e*r[1],e=>e*r[2],e=>e*r[3]];let a,n,s,l;switch(e.length){case 1:{const t=!isDefaultColorRange();t&&(p.pushStyle(),presetColorMode(p.RGB)),[a,n,s,l]=toRGB(e[0]).map(((e,t)=>e/RGB_COLOR_RANGE[t])),t&&p.popStyle();break}case 3:case 4:4==e.length&&(l=e.pop()/RGB_COLOR_RANGE[3]),[a,n,s]=e.map(((e,t)=>e/RGB_COLOR_RANGE[t]))}const i=Math.max(a,n,s),c=i-Math.min(a,n,s),_=c&&(i==a?(n-s)/c:i==n?2+(s-a)/c:4+(a-n)/c);let h=[_<0?_+6:_,i&&c/i,i,l||1];return h=h.map(((e,t)=>o[t](e))),h},saturate=e=>_appendFilter(`saturate(${e}%)`),sepia=(e=100)=>_appendFilter(`sepia(${e}%)`),shadow=(...e)=>{let t=e[0];e.length>1&&(t=p.color.apply(null,e)),_.isNumber(e[0])&&(t=RGBToHex(t,!1)),ctx.shadowColor=t},shadowBlur=e=>ctx.shadowBlur=e,shadowOffset=(e,t=e)=>{_.isNumber(e)&&(ctx.shadowOffsetX=e),ctx.shadowOffsetY=t},toHSB=(...e)=>{switch(e.length){case 1:{const t=e[0];if(_.isNumber(t)){const e=getColorMode()==p.RGB;e&&(p.pushStyle(),presetColorMode(p.HSB));const r=[p.hue(t),p.saturation(t),p.brightness(t),p.alpha(t)];return e&&p.popStyle(),r}return hexToHSB(t)}case 3:case 4:return RGBToHSB.apply(p,e)}},toRGB=(...e)=>{switch(e.length){case 1:{const t=e[0];if(_.isNumber(t)){const e=getColorMode()==p.HSB;e&&(p.pushStyle(),presetColorMode(p.RGB));const r=[p.red(t),p.green(t),p.blue(t),p.alpha(t)];return e&&p.popStyle(),r}return hexToRGB(t)}case 3:case 4:return HSBToRGB.apply(p,e)}},linearGradientOld=(t,r,o,a,n,p,s=RIGHT,l=5)=>{switch(push(),e.strokeWeight(1),s){case LEFT:case RIGHT:if(s==LEFT&&([n,p]=[p,n]),1==l)for(let s=0;s<o;s++)e.stroke(e.lerpColor(n,p,s/o)),e.line(t+s,r,t+s,r+a);else for(let s=0;s<o;s+=l){const i=e.lerpColor(n,p,s/o);e.stroke(i),e.fill(i),s+l>o?e.rect(t+s,r,o-s,a):e.rect(t+s,r,l,a)}break;case TOP:case UP:case BOTTOM:case DOWN:if(s!=TOP&&s!=UP||([n,p]=[p,n]),1==l)for(let s=0;s<a;s++)e.stroke(e.lerpColor(n,p,s/a)),e.line(t,r+s,t+o,r+s);else for(let s=0;s<a;s+=l){const i=e.lerpColor(n,p,s/a);e.stroke(i),e.fill(i),s+l>o?e.rect(t,r+s,o,a-s):e.rect(t,r+s,o,l)}break;case TOP_LEFT:case BOTTOM_RIGHT:if(s==TOP_LEFT&&([n,p]=[p,n]),1==l){for(let s=0;s<o;s++)e.stroke(e.lerpColor(n,p,s/o/2)),e.line(t+s,r,t,r+e.map(s,0,o,0,a));for(let s=0;s<o;s++)e.stroke(e.lerpColor(n,p,s/o/2+.5)),e.line(t+s,r+a,t+o,r+e.map(s,0,o,0,a))}else{const e=Math.max(o,a)*Math.sqrt(2);showGraphics(t,r,o,a,(function(){this.angleMode="degrees",this.rotate(-45);for(let t=0;t<e;t+=l){const r=this.lerpColor(n,p,t/e);this.stroke(r),this.fill(r),t+l>e?this.rect(-e/2,t,e,e-t):this.rect(-e/2,t,e,l)}}))}break;case TOP_RIGHT:case BOTTOM_LEFT:if(s==TOP_RIGHT&&([n,p]=[p,n]),1==l){for(let s=0;s<o;s++)e.stroke(e.lerpColor(n,p,s/o/2)),e.line(t+o-s,r,t+o,r+e.map(s,0,o,0,a));for(let s=0;s<o;s++)e.stroke(e.lerpColor(n,p,s/o/2+.5)),e.line(t+o-s,r+a,t,r+e.map(s,0,o,0,a))}else{const e=Math.max(o,a)*Math.sqrt(2);showGraphics(t,r,o,a,(function(){this.angleMode="degrees",this.rotate(45);for(let t=0;t<e;t+=l){const r=this.lerpColor(n,p,t/e);this.stroke(r),this.fill(r),t+l>e?this.rect(0,t-e/2,e,e-t):this.rect(0,t-e/2,e,l)}}))}}pop()},radialGradientOld=(t,r,o,a,n,p,s=5)=>{push(),e.strokeWeight(1);const l=Math.max(o,a);if(1==s){e.noFill();for(let s=0;s<l;s++)e.stroke(e.lerpColor(p,n,s/l)),e.arc(t,r,o-e.map(s,0,l,0,o),a-e.map(s,0,l,0,a),0,360)}else for(let i=0;i<l;i+=s){const s=e.lerpColor(p,n,i/l);e.stroke(s),e.fill(s),e.ellipse(t,r,o-e.map(i,0,l,0,o),a-e.map(i,0,l,0,a))}pop()},_text_initialized_="undefined"!=typeof TEXT_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Text Essentials depends on the Essentials Core."):(TEXT_ESSENTIALS=!0,_silent_||_text_initialized_||console.info("%cText Essentials",_console_style_)),f=e=>format(e),getTextSize=()=>ctx.font.match(/\d+/),fastGradientText=(e,t,r,o,a)=>{if(p.pushStyle(),e.includes("\n")){const n=e.split("\n");for(const e in n)fastGradientText(n[e],t,r+e*textAscent(),o,a)}else for(let n=0;n<e.length;n++)p.fill(p.lerpColor(o,a,n/e.length)),p.text(e[n],t+p.textWidth(e.slice(0,n)),r);p.popStyle()},font=function(e){let t=Array.from(arguments).slice(1);t.push("");let r,o=t.find((function(e){return _.isBoolean(e)}));o=!_.isBoolean(o)&&!0,t=_.without(t,!0,!1);let a=t.find((function(e){return!isNaN(e)}));if(isFont(e)){r=e,a=a||+r.css.match(/\d+/)[0],previousCSS=r.css.split(" "),previousProperties=previousCSS.slice(0,-2).filter((function(e){return"normal"!==e})),t=_.union(t,previousProperties);let o=t.filter((function(e){return!!_.isString(e)&&"-"==e.charAt(0)}));o=o.map((function(e){return e.substr(1)})),t=t.filter((function(e){return!!_.isString(e)&&"-"!=e.charAt(0)})),t=_.difference(t,o).join(" "),r.css=`${t} ${a}px/${a+2}px ${_.last(previousCSS)}`}else a=a||12,r=p.createFont(e,a),t=_.without(t,a),r.css=(!_.isEmpty(t)&&t.join(" ")+" ")+`${a}px/${a+2}px ${e}`;return o&&p.textFont(r),r},format=e=>evalPJS(`\`${e}\``),formatDuration=(e,t,r=!1)=>{if(!e)return"0";if(e<0&&(e=-e),t&&(e=roundTo(e,t)),e<.001)return"0";const o={year:Math.floor(e/31536e6),month:Math.floor(e/2592e6),day:Math.floor(e/864e5),hour:Math.floor(e/36e5)%24,minute:Math.floor(e/6e4)%60,second:Math.floor(e/1e3)%60,millisecond:Math.floor(e)%1e3,microsecond:Math.floor(1e3*e)%1e3};return r?Object.values(o):Object.entries(o).filter((e=>0!==e[1])).map((([e,t])=>`${t} ${pluralize(t,e)}`)).join(", ")},formatNumber=(e,t="en",r={})=>e.toLocaleString(t,r),highlightText=(e,t,r,o=YELLOW)=>{if(/\S/.test(e)){e=e.split("\n"),p.pushStyle(),p.noStroke(),p.rectMode(p.CORNER),p.textAlign(p.LEFT,p.TOP);for(const a in e)e[a]=` ${e[a]} `,p.pushStyle(),p.fill(o),p.rect(t,r+a*p.textAscent()*2,p.textWidth(e[a]),1.75*p.textAscent()),p.popStyle(),p.text(e[a],t,r+a*p.textAscent()*2);p.popStyle()}},lightOrDarkText=e=>{let t,r,o;if("string"==typeof e){const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);t=parseInt(a[1],16),r=parseInt(a[2],16),o=parseInt(a[3],16)}else t=p.red(e),r=p.green(e),o=p.blue(e);return(t+o+r)/3<225?WHITE:BLACK},multicoloredText=(e,t,r)=>{if(/\S/.test(e)){e=e.split("\n"),p.pushStyle(),p.textAlign(p.LEFT,p.CORNER);for(const o in e){e[o]=e[o].split(/\[|]/);let a=0;for(const n in e[o])if(/\d+,\d+,\d+/.test(e[o][n])){const t=e[o][n].split(",");p.fill.apply(p,t),delete e[o][n],0===a&&(e[o][n-1]+=" "),a+=1}else{const s=p.textWidth(e[o].slice(0,n));p.text(e[o][n],t+s-2*a*p.textWidth(" "),r+o*p.textAscent()*2)}}p.popStyle()}},obfuscate=e=>{let t="";for(const r in _.range(e.length)){let o=e.charCodeAt(r).toString(16);if(o.length<=2){for(;o.length<2;)o="0"+o;t+="\\x"+o}else{for(;o.length<4;)o="0"+o;t+="\\u"+o}}return t},ordinalSuffix=e=>{const t=parseInt(e,10),r=[t%10,t%100],o=["st","nd","rd","th"];return[1,2,3,4].includes(r[0])&&![11,12,13,14,15,16,17,18,19].includes(r[1])?t+o[r[0]-1]:t+o[3]},outlineText=(e,t,r,o=5,a=BLACK)=>{e=e.replace("\n",""),ctx.save(),ctx.lineJoin="round",ctx.lineWidth=o,_.isNumber(a)&&(a="undefined"!=typeof COLOR_ESSENTIALS?RGBToHex(a,!1):"#"+hex(a,6)),ctx.strokeStyle=a,ctx.strokeText(e,t,r),ctx.restore(),pushStyle(),p.textAlign(p.LEFT,p.TOP),p.text(e,t,r),popStyle()},pluralize=(e,t,r=t+"s")=>{const o=(e,t,r=t+"s")=>[1,-1].includes(Number(e))?t:r;return"object"==typeof e?(t,r)=>o(t,r,e[r]):o(e,t,r)},removeNonASCII=e=>e.replace(/[^\x20-\x7E]/g,""),String.prototype.format=function(){return format(this)},String.prototype.obfuscate=function(){return obfuscate(this)},String.prototype.removeNonASCII=function(){return removeNonASCII(this)},String.prototype.toTitleCase=function(){return toTitleCase(this)},String.prototype.toCamelCase=function(){return toCamelCase(this)},String.prototype.toKebabCase=function(){return toKebabCase(this)},String.prototype.toSnakeCase=function(){return toSnakeCase(this)},toCamelCase=e=>{const t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");return t.slice(0,1).toLowerCase()+t.slice(1)},toKebabCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("-"),toSnakeCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_"),toTitleCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),underlineText=(e,t,r,o=BLACK,a=p.externals.context.font.match(/\d+/)[0]/12)=>{if(/\S/.test(e)){strings=e.split("\n"),p.pushStyle(),p.strokeCap(p.SQUARE),p.strokeWeight(a),p.stroke(o);for(const e in strings)p.line(t,r+p.textAscent()/4+p.textAscent()*e*1.55,t+p.textWidth(strings[e]),r+p.textAscent()/4+p.textAscent()*e*1.55);p.textAlign(p.LEFT,p.CORNER),p.text(e,t,r),p.popStyle()}},wordWrap=(e,t,r="\n")=>e.replace(new RegExp(`(?![^\\n]{1,${t}}$)([^\\n]{1,${t}})\\s`,"g"),"$1"+r),outlineTextOld=(t,r=0,o=e.textAscent(),a=BLACK)=>{if(/\S/.test(t)){push(),e.fill(a);for(let a=-2;a<3;a++){for(let n=-1;n<3;n++)e.text(t,r+a,o+n);e.text(t,r+a,o),e.text(t,r,o+a)}pop(),e.text(t,r,o)}},_shape_initialized_="undefined"!=typeof SHAPE_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Shape Essentials depends on the Essentials Core."):(SHAPE_ESSENTIALS=!0,_silent_||_shape_initialized_||console.info("%cShape Essentials",_console_style_)),getStrokeCap=()=>ctx.lineCap,getStrokeJoin=()=>ctx.lineJoin,getStrokeWeight=()=>ctx.lineWidth,noStrokeDash=()=>strokeDash(),circle=(e,t,r)=>p.ellipse(e,t,r,r),cylinder=(e,t,r,o)=>{if(r=Math.abs(r),o=Math.abs(o),p.pushMatrix(),p.translate(e,t),o>r){const e=Math.cos(Math.PI)<0?p.TWO_PI:360;p.rotate(e/4),cylinder(0,0,o,r)}else{const e=o/2,t=(r-o)/2,a=4/3*(Math.sqrt(2)-1)*e;drawShape((()=>{p.vertex(t,-e),p.bezierVertex(t+a,-e,t+e,-a,t+e,0),p.bezierVertex(t+e,a,t+a,e,t,e),p.vertex(-t,e),p.bezierVertex(-t-a,e,-t-e,a,-t-e,0),p.bezierVertex(-t-e,-a,-t-a,-e,-t,-e)}),!0)}p.popMatrix()},donut=(e,t,r,o)=>{const a=4/3*(Math.sqrt(2)-1);p.pushMatrix(),p.translate(e,t),p.pushStyle(),p.noStroke(),drawShape((()=>{let e=o/2,t=a*e;p.vertex(e,0),p.bezierVertex(e,t,t,e,0,e),p.bezierVertex(-t,e,-e,t,-e,0),p.bezierVertex(-e,-t,-t,-e,0,-e),p.bezierVertex(t,-e,e,-t,e,0),e=r/2,t=a*e,p.vertex(e,0),p.bezierVertex(e,-t,t,-e,0,-e),p.bezierVertex(-t,-e,-e,-t,-e,0),p.bezierVertex(-e,t,-t,e,0,e),p.bezierVertex(t,e,e,t,e,0)}),!0),p.popStyle(),p.pushStyle(),p.noFill(),circle(0,0,o),circle(0,0,r),p.popStyle(),p.popMatrix()},drawShape=(e,t,r)=>{t=t&&p.CLOSE,p.beginShape(r),e(),p.endShape(t)},edge=(e,t,r,o=0)=>{"degrees"==p.angleMode&&(o=p.radians(o));const a=e+r*Math.cos(o),n=t+r*Math.sin(o);p.line(e,t,a,n)},getRotation=(e="degrees"==p.angleMode,t=ctx.getTransform())=>{let r=Math.atan2(t.b,t.a);return r<0&&(r+=2*Math.PI),e?p.degrees(r):r},heart=(e,t,r)=>{const o=t-2*r/5,a=t+r,n=t-6*r/5,s=t-2*r/5;let l=e+r/2,i=e+9*r/5;drawShape((()=>{p.vertex(e,o),p.bezierVertex(l,n,i,s,e,a),l=2*e-l,i=2*e-i,p.bezierVertex(i,s,l,n,e,o)}),!0)},parallelogram=(e,t,r,o,a,n)=>{const s=r-e,l=o-t;p.quad(e,t,r,o,a+s,n+l,a,n)},polygon=(e,t,r,o,a)=>{const n=Math.cos(Math.PI)<0?2*Math.PI:360;p.pushMatrix(),p.translate(e,t),p.rotate(null==a?-n/4:a),drawShape((()=>{for(let e=0;e<n;e+=n/r)p.vertex(o*Math.cos(e),o*Math.sin(e))}),!0),p.popMatrix()},rectangle=(e,t,r,o=r,a,n,s,l)=>{null==a?p.rect(e,t,r,o):null==n?p.rect(e,t,r,o,a):null==s?p.rect(e,t,r,o,a,a,n,n):null==l?p.rect(e,t,r,o,a,n,s,0):p.rect(e,t,r,o,a,n,s,l)},square=(e,t,r,o,a,n,s)=>{null==o?p.rect(e,t,r,r):null==a?p.rect(e,t,r,r,o):null==n?p.rect(e,t,r,r,o,o,a,a):null==s?p.rect(e,t,r,r,o,a,n,0):p.rect(e,t,r,r,o,a,n,s)},rhombus=(e,t,r,o,a,n)=>{const s=p.dist(e,t,r,o)/p.dist(e,t,a,n);a=e+s*(a-e),n=t+s*(n-t),parallelogram(e,t,r,o,a,n)},star=(e,t,r,o=5,a)=>{const n=Math.cos(Math.PI)<0?p.TWO_PI:360,s=r*Math.sin(.05*n)/Math.sin(.35*n);p.pushMatrix(),p.translate(e,t),p.rotate(null==a?-n/4:a),drawShape((()=>{let e;for(let t=0;t<n;t+=n/(2*o))e=e===r?s:r,p.vertex(e*Math.cos(t),e*Math.sin(t))}),!0),p.popMatrix()},strokeDash=(...e)=>ctx.setLineDash(e),trapezoid=(e,t,r,o,a)=>{const n=Math.max(o,a);p.quad(e+(n-o)/2,t,e+(n-o)/2+o-1,t,e+(n-a)/2+a-1,t+r-1,e+(n-a)/2,t+r-1)},strokeDashOffset=e=>ctx.lineDashOffset=e;