/**
 * Essentials.
 *
 * The Essentials library provides utility functions for the Khan Academy
 * Processing Environment.
 *
 * @link https://github.com/bhavjitChauhan/Essentials
 * @file Minified CDN Essentials Build
 * @author Bhavjit Chauhan
 */

//jshint ignore: start

_environment_=this instanceof Processing?"CDN":"KA",_console_style_="font-family:system-ui;font-size:0.75rem;",_core_initialized_="undefined"!=typeof ESSENTIALS_CORE,ESSENTIALS_CORE=!0,ESSENTIALS_VERSION="1.1.0",ESSENTIALS_ASCII="\n    _/_/_/_/    _/_/_/    _/_/_/  _/_/_/_/  _/      _/  _/_/_/_/_/  _/_/_/    _/_/    _/          _/_/_/\n   _/        _/        _/        _/        _/_/    _/      _/        _/    _/    _/  _/        _/\n  _/_/_/      _/_/      _/_/    _/_/_/    _/  _/  _/      _/        _/    _/_/_/_/  _/          _/_/\n _/              _/        _/  _/        _/    _/_/      _/        _/    _/    _/  _/              _/\n_/_/_/_/  _/_/_/    _/_/_/    _/_/_/_/  _/      _/      _/      _/_/_/  _/    _/  _/_/_/_/  _/_/_/\n\n",_silent_="undefined"!=typeof _silent_&&_silent_,_silent_||_core_initialized_||console.info(`%cESSENTIALS\n%cThe Khan Academy utility library.\n\n${_environment_} Build\nVersion ${ESSENTIALS_VERSION}\nCopyright Â© 2021 Bhavjit Chauhan\nhttps://github.com/bhavjitChauhan/Essentials`,"color:transparent;\nfont-size:3rem;\nbackground-image: url('https://github.com/bhavjitChauhan/Essentials/blob/master/logo.png?raw=true');\nbackground-position:center;\nbackground-repeat: no-repeat;\nbackground-size:contain;",_console_style_),_eval=eval,e=Processing.instances[0],[LEFT,RIGHT,TOP,BOTTOM,UP,DOWN]=[e.LEFT,e.RIGHT,e.TOP,e.BOTTOM,e.UP,e.DOWN],TOP_LEFT=1,TOP_RIGHT=2,BOTTOM_RIGHT=3,BOTTOM_LEFT=4,WIDTH=e.width,HEIGHT=e.height,HALF_WIDTH=WIDTH/2,HALF_HEIGHT=HEIGHT/2,CANVAS="#output-canvas",CANVAS_LOG="body div:first div:nth-child(2) div div",clearLogs=()=>e._clearLogs(),noop=()=>_.noop,restart=()=>e.Program.restart(),attempt=(e,...t)=>{try{return e(...t)}catch(e){return e instanceof Error?e:new Error(e)}},chainAsync=e=>{let t=0;const o=_.last(e),r=()=>{const n=e[t++];n===o?n():n(r)};r()},clean=t=>{const o=t.toString().replace(/__env__\.KAInfiniteLoopCount\+\+;/g,"").replace(/if \(__env__\.KAInfiniteLoopCount > 1000\) {[\s]+__env__\.KAInfiniteLoopProtect\('[^']*'\);[^}]+}/g,"").replace(/__env__\.PJSOutput\.applyInstance\((__env__\.\S+), '\S+'\)/g,"new $1");return Object.constructor(`return (function(__env__) {return ${o};});`)()(e)},complement=e=>(...t)=>!e(...t),generateUUID=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),getColonTime=function(){return(new Date).toTimeString().slice(0,8)},inherit=(e,t)=>{Object.setPrototypeOf(e.prototype,t.prototype),e.prototype.constructor=e,t.prototype.constructor===Object&&(t.prototype.constructor=t)},isImage=e=>"object"==typeof e&&_.isObject(e.sourceImg),isFont=e=>"object"==typeof e&&_.isFunction(e.getCSSDefinition),isSound=e=>"object"==typeof e&&_.isObject(e.audio),mostPerformant=(e,t=1e4)=>{const o=e.map((e=>{const o=performance.now();for(let o=0;o<t;o++)e();return performance.now()-o}));return o.indexOf(Math.min(...o))},pop=()=>{e.popStyle(),e.popMatrix()},printf=function(t){const o=Array.from(arguments).slice(1);for(const e in o)t=t.replace(/(?<!\\)%/,o[e]);t=t.replaceAll(/\\%/g,"%"),e.println(t)},randomInt=(e,t)=>_.random(e,t),push=()=>{e.pushMatrix(),e.pushStyle()},showGraphics=(t,o,r,n,l,s=e.P2D)=>{const c=e.createGraphics(r,n,s);l.call(c),e.image(c,t,o)},timeTaken=(e,t="default")=>{console.time(`timeTaken#${t}`);const o=e();return console.timeEnd(`timeTaken#${t}`),o},_color_initialized_="undefined"!=typeof COLOR_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Color Essentials depends on the Essentials Core."):(COLOR_ESSENTIALS=!0,_silent_||_color_initialized_||console.info("%cColor Essentials",_console_style_)),linearGradientBackground=(e,t,o=RIGHT,r=5)=>linearGradient(0,0,WIDTH,HEIGHT,e,t,o,r),radialGradientBackground=(e,t,o=5)=>{const r=Math.sqrt(Math.max(WIDTH,HEIGHT)**2*2);radialGradient(HALF_WIDTH,HALF_HEIGHT,r,r,e,t,o)},angularGradientBackground=(e,t,o=0,r=5)=>{const n=Math.sqrt(Math.max(WIDTH,HEIGHT)**2*2);angularGradient((WIDTH-n)/2,(HEIGHT-n)/2,n,n,e,t,o,r)},circularGradientBackground=(e,t,o=0,r=5)=>{const n=Math.sqrt(Math.max(WIDTH,HEIGHT)**2*2);circularGradient((WIDTH-n)/2,(HEIGHT-n)/2,n,n,e,t,o,r)},angularGradient=(t,o,n,l,s,c,a=0,i=5)=>{a-=90;const p=Math.ceil(10*e.degrees(Math.atan(i/Math.max(n,l))))/10;if(push(),1==i){e.strokeWeight(1.5);for(let i=a;i<a+359;i+=p)e.stroke(e.lerpColor(s,c,(i-a)/360)),r=e.radians(i),e.line(t+n/2,o+l/2,e.map(Math.cos(r),-1,1,t,t+n),e.map(Math.sin(r),-1,1,o,o+l))}else{e.strokeWeight(1);for(let r=a;r<a+359;r+=p){const i=e.lerpColor(s,c,(r-a)/360);e.stroke(i),e.fill(i),r1=e.radians(r),r2=e.radians(r-p),e.triangle(t+n/2,o+l/2,e.map(Math.cos(r1),-1,1,t,t+n),e.map(Math.sin(r1),-1,1,o,o+l),e.map(Math.cos(r2),-1,1,t,t+n),e.map(Math.sin(r2),-1,1,o,o+l))}}pop()},circularGradient=(t,o,n,l,s,c,a=0,i=5)=>{const p=Math.ceil(10*e.degrees(Math.atan(i/Math.max(n,l))))/10;if(push(),1==i){e.strokeWeight(1.5);for(let i=a-1;i<a+180;i+=p)e.stroke(e.lerpColor(s,c,Math.abs((i-a)/180))),r=e.radians(i),e.line(t+n/2,o+l/2,e.map(Math.cos(r),-1,1,t,t+n),e.map(Math.sin(r),-1,1,o,o+l));for(let i=a-1;i>a-180;i-=p)e.stroke(e.lerpColor(s,c,Math.abs((i-a)/180))),r=e.radians(i),e.line(t+n/2,o+l/2,e.map(Math.cos(r),-1,1,t,t+n),e.map(Math.sin(r),-1,1,o,o+l))}else{e.strokeWeight(1);for(let r=a-1;r<a+180;r+=p){const i=e.lerpColor(s,c,Math.abs((r-a)/180));e.stroke(i),e.fill(i),r1=e.radians(r),r2=e.radians(r-p),e.triangle(t+n/2,o+l/2,e.map(Math.cos(r1),-1,1,t,t+n),e.map(Math.sin(r1),-1,1,o,o+l),e.map(Math.cos(r2),-1,1,t,t+n),e.map(Math.sin(r2),-1,1,o,o+l))}r1=e.radians(a-180),r2=e.radians(a-180-p),e.stroke(c),e.fill(c),e.triangle(t+n/2,o+l/2,e.map(Math.cos(r1),-1,1,t,t+n),e.map(Math.sin(r1),-1,1,o,o+l),e.map(Math.cos(r2),-1,1,t,t+n),e.map(Math.sin(r2),-1,1,o,o+l));for(let r=a-1;r>a-180;r-=p){const i=e.lerpColor(s,c,Math.abs((r-a)/180));e.stroke(i),e.fill(i),r1=e.radians(r),r2=e.radians(r-p),e.triangle(t+n/2,o+l/2,e.map(Math.cos(r1),-1,1,t,t+n),e.map(Math.sin(r1),-1,1,o,o+l),e.map(Math.cos(r2),-1,1,t,t+n),e.map(Math.sin(r2),-1,1,o,o+l))}}pop()},RED=e.color(255,0,0),GREEN=e.color(0,128,0),BLUE=e.color(0,0,255),LIGHTSALMON=e.color(255,160,122),SALMON=e.color(250,128,114),DARKSALMON=e.color(233,150,122),LIGHTCORAL=e.color(240,128,128),INDIANRED=e.color(205,92,92),CRIMSON=e.color(220,20,60),FIREBRICK=e.color(178,34,34),DARKRED=e.color(139,0,0),CORAL=e.color(255,127,80),TOMATO=e.color(255,99,71),ORANGERED=e.color(255,69,0),GOLD=e.color(255,215,0),ORANGE=e.color(255,165,0),DARKORANGE=e.color(255,140,0),LIGHTYELLOW=e.color(255,255,224),LEMONCHIFFON=e.color(255,250,205),LIGHTGOLDENRODYELLOW=e.color(250,250,210),PAPAYAWHIP=e.color(255,239,213),MOCCASIN=e.color(255,228,181),PEACHPUFF=e.color(255,218,185),PALEGOLDENROD=e.color(238,232,170),KHAKI=e.color(240,230,140),DARKKHAKI=e.color(189,183,107),YELLOW=e.color(255,255,0),LAWNGREEN=e.color(124,252,0),CHARTREUSE=e.color(127,255,0),LIMEGREEN=e.color(50,205,50),LIME=e.color(0,255,0),FORESTGREEN=e.color(34,139,34),DARKGREEN=e.color(0,100,0),GREENYELLOW=e.color(173,255,47),YELLOWGREEN=e.color(154,205,50),SPRINGGREEN=e.color(0,255,127),MEDIUMSPRINGGREEN=e.color(0,250,154),LIGHTGREEN=e.color(144,238,144),PALEGREEN=e.color(152,251,152),DARKSEAGREEN=e.color(143,188,143),MEDIUMSEAGREEN=e.color(60,179,113),SEAGREEN=e.color(46,139,87),OLIVE=e.color(128,128,0),DARKOLIVEGREEN=e.color(85,107,47),OLIVEDRAB=e.color(107,142,35),LIGHTCYAN=e.color(224,255,255),CYAN=e.color(0,255,255),AQUA=e.color(0,255,255),AQUAMARINE=e.color(127,255,212),MEDIUMAQUAMARINE=e.color(102,205,170),PALETURQUOISE=e.color(175,238,238),TURQUOISE=e.color(64,224,208),MEDIUMTURQUOISE=e.color(72,209,204),DARKTURQUOISE=e.color(0,206,209),LIGHTSEAGREEN=e.color(32,178,170),CADETBLUE=e.color(95,158,160),DARKCYAN=e.color(0,139,139),TEAL=e.color(0,128,128),POWDERBLUE=e.color(176,224,230),LIGHTBLUE=e.color(173,216,230),LIGHTSKYBLUE=e.color(135,206,250),SKYBLUE=e.color(135,206,235),DEEPSKYBLUE=e.color(0,191,255),LIGHTSTEELBLUE=e.color(176,196,222),DODGERBLUE=e.color(30,144,255),CORNFLOWERBLUE=e.color(100,149,237),STEELBLUE=e.color(70,130,180),ROYALBLUE=e.color(65,105,225),MEDIUMBLUE=e.color(0,0,205),DARKBLUE=e.color(0,0,139),NAVY=e.color(0,0,128),MIDNIGHTBLUE=e.color(25,25,112),MEDIUMSLATEBLUE=e.color(123,104,238),SLATEBLUE=e.color(106,90,205),DARKSLATEBLUE=e.color(72,61,139),LAVENDER=e.color(230,230,250),THISTLE=e.color(216,191,216),PLUM=e.color(221,160,221),VIOLET=e.color(238,130,238),ORCHID=e.color(218,112,214),FUCHSIA=e.color(255,0,255),MAGENTA=e.color(255,0,255),MEDIUMORCHID=e.color(186,85,211),MEDIUMPURPLE=e.color(147,112,219),BLUEVIOLET=e.color(138,43,226),DARKVIOLET=e.color(148,0,211),DARKORCHID=e.color(153,50,204),DARKMAGENTA=e.color(139,0,139),PURPLE=e.color(128,0,128),INDIGO=e.color(75,0,130),PINK=e.color(255,192,203),LIGHTPINK=e.color(255,182,193),HOTPINK=e.color(255,105,180),DEEPPINK=e.color(255,20,147),PALEVIOLETRED=e.color(219,112,147),MEDIUMVIOLETRED=e.color(199,21,133),WHITE=e.color(255,255,255),SNOW=e.color(255,250,250),HONEYDEW=e.color(240,255,240),MINTCREAM=e.color(245,255,250),AZURE=e.color(240,255,255),ALICEBLUE=e.color(240,248,255),GHOSTWHITE=e.color(248,248,255),WHITESMOKE=e.color(245,245,245),SEASHELL=e.color(255,245,238),BEIGE=e.color(245,245,220),OLDLACE=e.color(253,245,230),FLORALWHITE=e.color(255,250,240),IVORY=e.color(255,255,240),ANTIQUEWHITE=e.color(250,235,215),LINEN=e.color(250,240,230),LAVENDERBLUSH=e.color(255,240,245),MISTYROSE=e.color(255,228,225),GAINSBORO=e.color(220,220,220),LIGHTGRAY=e.color(211,211,211),SILVER=e.color(192,192,192),DARKGRAY=e.color(169,169,169),GRAY=e.color(128,128,128),DIMGRAY=e.color(105,105,105),LIGHTSLATEGRAY=e.color(119,136,153),SLATEGRAY=e.color(112,128,144),DARKSLATEGRAY=e.color(47,79,79),BLACK=e.color(0,0,0),CORNSILK=e.color(255,248,220),BLANCHEDALMOND=e.color(255,235,205),BISQUE=e.color(255,228,196),NAVAJOWHITE=e.color(255,222,173),WHEAT=e.color(245,222,179),BURLYWOOD=e.color(222,184,135),TAN=e.color(210,180,140),ROSYBROWN=e.color(188,143,143),SANDYBROWN=e.color(244,164,96),GOLDENROD=e.color(218,165,32),PERU=e.color(205,133,63),CHOCOLATE=e.color(210,105,30),SADDLEBROWN=e.color(139,69,19),SIENNA=e.color(160,82,45),BROWN=e.color(165,42,42),MAROON=e.color(128,0,0),TRANSPARENT=e.color(255,0),hexToRGB=t=>{t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,o,r){return t+t+o+o+r+r}));let o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return o=o?o.splice(1).map((function(e){return parseInt(e,16)})):null,push(),e.colorMode(e.RGB),o=e.color.apply(e,o),pop(),o},HSBToRGB=function(t,o,r){1==arguments.length&&(c=t,t=e.hue(c),o=e.saturation(c),r=e.brightness(c)),t/=255,o/=255,r/=255;const n=Math.floor(6*t),l=6*t-n,s=r*(1-o),a=r*(1-l*o),i=r*(1-(1-l)*o);let p,E,_;switch(n%6){case 0:p=r,E=i,_=s;break;case 1:p=a,E=r,_=s;break;case 2:p=s,E=r,_=i;break;case 3:p=s,E=a,_=r;break;case 4:p=i,E=s,_=r;break;case 5:p=r,E=s,_=a}const h=[p,E,_].map((function(e){return 255*e}));return e.color.apply(e,h)},linearGradient=(t,o,r,n,l,s,c=RIGHT,a=5)=>{switch(push(),e.strokeWeight(1),c){case LEFT:case RIGHT:if(c==LEFT&&([l,s]=[s,l]),1==a)for(let c=0;c<r;c++)e.stroke(e.lerpColor(l,s,c/r)),e.line(t+c,o,t+c,o+n);else for(let c=0;c<r;c+=a){const i=e.lerpColor(l,s,c/r);e.stroke(i),e.fill(i),c+a>r?e.rect(t+c,o,r-c,n):e.rect(t+c,o,a,n)}break;case TOP:case UP:case BOTTOM:case DOWN:if(c!=TOP&&c!=UP||([l,s]=[s,l]),1==a)for(let c=0;c<n;c++)e.stroke(e.lerpColor(l,s,c/n)),e.line(t,o+c,t+r,o+c);else for(let c=0;c<n;c+=a){const i=e.lerpColor(l,s,c/n);e.stroke(i),e.fill(i),c+a>r?e.rect(t,o+c,r,n-c):e.rect(t,o+c,r,a)}break;case TOP_LEFT:case BOTTOM_RIGHT:if(c==TOP_LEFT&&([l,s]=[s,l]),1==a){for(let c=0;c<r;c++)e.stroke(e.lerpColor(l,s,c/r/2)),e.line(t+c,o,t,o+e.map(c,0,r,0,n));for(let c=0;c<r;c++)e.stroke(e.lerpColor(l,s,c/r/2+.5)),e.line(t+c,o+n,t+r,o+e.map(c,0,r,0,n))}else{const e=Math.max(r,n)*Math.sqrt(2);showGraphics(t,o,r,n,(function(){this.angleMode="degrees",this.rotate(-45);for(let t=0;t<e;t+=a){const o=this.lerpColor(l,s,t/e);this.stroke(o),this.fill(o),t+a>e?this.rect(-e/2,t,e,e-t):this.rect(-e/2,t,e,a)}}))}break;case TOP_RIGHT:case BOTTOM_LEFT:if(c==TOP_RIGHT&&([l,s]=[s,l]),1==a){for(let c=0;c<r;c++)e.stroke(e.lerpColor(l,s,c/r/2)),e.line(t+r-c,o,t+r,o+e.map(c,0,r,0,n));for(let c=0;c<r;c++)e.stroke(e.lerpColor(l,s,c/r/2+.5)),e.line(t+r-c,o+n,t,o+e.map(c,0,r,0,n))}else{const e=Math.max(r,n)*Math.sqrt(2);showGraphics(t,o,r,n,(function(){this.angleMode="degrees",this.rotate(45);for(let t=0;t<e;t+=a){const o=this.lerpColor(l,s,t/e);this.stroke(o),this.fill(o),t+a>e?this.rect(0,t-e/2,e,e-t):this.rect(0,t-e/2,e,a)}}))}}pop()},radialGradient=(t,o,r,n,l,s,c=5)=>{push(),e.strokeWeight(1);const a=Math.max(r,n);if(1==c){e.noFill();for(let c=0;c<a;c++)e.stroke(e.lerpColor(s,l,c/a)),e.arc(t,o,r-e.map(c,0,a,0,r),n-e.map(c,0,a,0,n),0,360)}else for(let i=0;i<a;i+=c){const c=e.lerpColor(s,l,i/a);e.stroke(c),e.fill(c),e.ellipse(t,o,r-e.map(i,0,a,0,r),n-e.map(i,0,a,0,n))}pop()},RGBToHex=function(e,t,o){return 1==arguments.length&&(c=e,e=c>>16&255,t=c>>8&255,o=255&c),"#"+((1<<24)+(e<<16)+(t<<8)+o).toString(16).slice(1)},RGBToHSB=function(t,o,r){1==arguments.length&&(c=t,t=c>>16&255,o=c>>8&255,r=255&c),t/=255,o/=255,r/=255;const n=Math.max(t,o,r),l=Math.min(t,o,r),s=n,a=n-l,i=0===n?0:a/n;if(n===l)h=0;else{switch(n){case t:h=(o-r)/a+(o<r?6:0);break;case o:h=(r-t)/a+2;break;case r:h=(t-o)/a+4}h/=6}let p=[h,i,s].map((function(e){return 255*e}));return push(),e.colorMode(e.HSB),p=e.color.apply(e,p),pop(),p},toHSB=function(){const t=arguments;if(1==t.length){const o=t[0];return"number"==typeof o?[e.hue(o),e.saturation(o),e.brightness(o)]:RGBToHSB.apply(e,toRGB(hexToRGB(o)))}if(3==t.length)return RGBToHSB.apply(e,t)},toRGB=function(){const t=arguments;if(1==t.length){const o=t[0];return"number"==typeof o?[e.red(o),e.green(o),e.blue(o)]:hexToRGB(o)}if(3==t.length)return HSBToRGB.apply(e,t)},_text_initialized_="undefined"!=typeof TEXT_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Text Essentials depends on the Essentials Core."):"undefined"==typeof COLOR_ESSENTIALS?console.error("Text Essentials depends on Color Essentials."):(TEXT_ESSENTIALS=!0,_silent_||_text_initialized_||console.info("%cText Essentials",_console_style_)),fastGradientText=(t,o=0,r=e.textAscent(),n,l)=>{if(push(),t.includes("\n")){const e=t.split("\n");for(const t in e)fastGradientText(e[t],o,r+t*textAscent(),n,l)}else for(let s=0;s<t.length;s++)e.fill(e.lerpColor(n,l,s/t.length)),e.text(t[s],o+e.textWidth(t.slice(0,s)),r);pop()},font=function(t){let o=Array.from(arguments).slice(1);o.push("");let r,n=o.find((function(e){return _.isBoolean(e)}));n=!_.isBoolean(n)&&!0,o=_.without(o,!0,!1);let l=o.find((function(e){return!isNaN(e)}));if(isFont(t)){r=t,l=l||+r.css.match(/\d+/)[0],previousCSS=r.css.split(" "),previousProperties=previousCSS.slice(0,-2).filter((function(e){return"normal"!==e})),o=_.union(o,previousProperties);let e=o.filter((function(e){return!!_.isString(e)&&"-"==e.charAt(0)}));e=e.map((function(e){return e.substr(1)})),o=o.filter((function(e){return!!_.isString(e)&&"-"!=e.charAt(0)})),o=_.difference(o,e).join(" "),r.css=`${o} ${l}px/${l+2}px ${_.last(previousCSS)}`}else l=l||12,r=e.createFont(t,l),o=_.without(o,l),r.css=(!_.isEmpty(o)&&o.join(" ")+" ")+`${l}px/${l+2}px ${t}`;return n&&e.textFont(r),r},formatDuration=e=>{e<0&&(e=-e);const t={day:Math.floor(e/864e5),hour:Math.floor(e/36e5)%24,minute:Math.floor(e/6e4)%60,second:Math.floor(e/1e3)%60,millisecond:Math.floor(e)%1e3};return Object.entries(t).filter((e=>0!==e[1])).map((([e,t])=>`${t} ${e}${1!==t?"s":""}`)).join(", ")},highlightText=(t,o=0,r=e.textAscent(),n=YELLOW)=>{if(/\S/.test(t)){t=t.split("\n"),e.noStroke(),e.rectMode(e.CORNER),e.textAlign(e.LEFT,e.TOP);for(const l in t)t[l]=` ${t[l]} `,push(),e.fill(n),e.rect(o,r+l*e.textAscent()*2,e.textWidth(t[l]),1.75*e.textAscent()),pop(),e.text(t[l],o,r+l*e.textAscent()*2)}},lightOrDarkText=t=>{let o,r,n;if("string"==typeof t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);o=parseInt(e[1],16),r=parseInt(e[2],16),n=parseInt(e[3],16)}else o=e.red(t),r=e.green(t),n=e.blue(t);return(o+n+r)/3<225?WHITE:BLACK},multicoloredText=(t,o=0,r=e.textAscent())=>{if(/\S/.test(t)){t=t.split("\n"),push(),e.textAlign(e.LEFT,e.CORNER);for(const n in t){t[n]=t[n].split(/\[|]/);let l=0;for(const s in t[n])if(/\d+,\d+,\d+/.test(t[n][s])){const o=t[n][s].split(",");e.fill.apply(e,o),delete t[n][s],0===l&&(t[n][s-1]+=" "),l+=1}else{const c=e.textWidth(t[n].slice(0,s));e.text(t[n][s],o+c-2*l*e.textWidth(" "),r+n*e.textAscent()*2)}}pop()}},ordinalSuffix=e=>{const t=parseInt(e,10),o=[t%10,t%100],r=["st","nd","rd","th"];return[1,2,3,4].includes(o[0])&&![11,12,13,14,15,16,17,18,19].includes(o[1])?t+r[o[0]-1]:t+r[3]},outlineText=(t,o=0,r=e.textAscent(),n=BLACK)=>{if(/\S/.test(t)){push(),e.fill(n);for(let n=-2;n<3;n++){for(let l=-1;l<3;l++)e.text(t,o+n,r+l);e.text(t,o+n,r),e.text(t,o,r+n)}pop(),e.text(t,o,r)}},pluralize=(e,t,o=t+"s")=>{const r=(e,t,o=t+"s")=>[1,-1].includes(Number(e))?t:o;return"object"==typeof e?(t,o)=>r(t,o,e[o]):r(e,t,o)},String.prototype.format=function(){let t=this,o=_.first(t.match(/\${.*?}/));for(;o;){let r;try{r=_eval(`\`${o}\``)}catch(t){const n=o.match(/(\w+)\(/)[1],l=o.match(/\(([^)]+)\)/)[1].split(",");r=e[n](...l)}t=t.replace(o,r),o=_.first(t.match(/\${.*?}/))}return t},String.prototype.obfuscate=function(){let e="";for(const t in _.range(this.length)){let o=this.charCodeAt(t).toString(16);if(o.length<=2){for(;o.length<2;)o="0"+o;e+="\\x"+o}else{for(;o.length<4;)o="0"+o;e+="\\u"+o}}return e},String.prototype.removeNonASCII=function(){return this.replace(/[^\x20-\x7E]/g,"")},String.prototype.toCamelCase=function(){const e=this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");return e.slice(0,1).toLowerCase()+e.slice(1)},String.prototype.toKebabCase=function(){return this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("-")},String.prototype.toSnakeCase=function(){return this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_")},String.prototype.toTitleCase=function(){return this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},underlineText=(t,o=0,r=e.textAscent(),n=BLACK,l=e.externals.context.font.match(/\d+/)[0]/12)=>{if(/\S/.test(t)){strings=t.split("\n"),push(),e.strokeCap(e.SQUARE),e.strokeWeight(l),e.stroke(n);for(const t in strings)e.line(o,r+e.textAscent()/4+e.textAscent()*t*1.55,o+e.textWidth(strings[t]),r+e.textAscent()/4+e.textAscent()*t*1.55);e.textAlign(e.LEFT,e.CORNER),e.text(t,o,r),pop()}},wordWrap=(e,t,o="\n")=>e.replace(new RegExp(`(?![^\\n]{1,${t}}$)([^\\n]{1,${t}})\\s`,"g"),"$1"+o),_shape_initialized_="undefined"!=typeof SHAPE_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Shape Essentials depends on the Essentials Core."):(SHAPE_ESSENTIALS=!0,_silent_||_shape_initialized_||console.info("%cShape Essentials",_console_style_)),blurRect=(t,o,r,n,l)=>{l<=0||(l=e.constrain(l,0,Math.min(r,n)),e.image(e.get(t,o,r,n),t,o,r/l,n/l),e.image(e.get(t,o,r/l,n/l),t,o,r,n))},circle=(t,o,r)=>e.ellipse(t,o,r,r),cylinder=(t,o,r,n)=>{if(r=Math.abs(r),n=Math.abs(n),push(),e.translate(t,o),n>r){const t=Math.cos(Math.PI)<0?e.TWO_PI:360;e.rotate(t/4),cylinder(0,0,n,r)}else{const t=n/2,o=(r-n)/2,l=4/3*(Math.sqrt(2)-1)*t;drawShape((()=>{e.vertex(o,-t),e.bezierVertex(o+l,-t,o+t,-l,o+t,0),e.bezierVertex(o+t,l,o+l,t,o,t),e.vertex(-o,t),e.bezierVertex(-o-l,t,-o-t,l,-o-t,0),e.bezierVertex(-o-t,-l,-o-l,-t,-o,-t)}),!0)}pop()},dashedLine=(t,o,r,n,l=10,s=10,c=!0,a=!0)=>{const i=e.dist(t,o,r,n);let p=0;for(;p<=i-l;p+=l+2*s)e.line(e.map(p,0,i,t,r),e.map(p,0,i,o,n),e.map(p+l,0,i,t,r),e.map(p+l,0,i,o,n));c&&p<i&&e.line(e.map(p,0,i,t,r),e.map(p,0,i,o,n),r,n),a&&p>=i&&e.point(r+.5,n+.5)},donut=(t,o,r,n)=>{const l=4/3*(Math.sqrt(2)-1);push(),e.translate(t,o),push(),e.noStroke(),drawShape((()=>{let t=n/2,o=l*t;e.vertex(t,0),e.bezierVertex(t,o,o,t,0,t),e.bezierVertex(-o,t,-t,o,-t,0),e.bezierVertex(-t,-o,-o,-t,0,-t),e.bezierVertex(o,-t,t,-o,t,0),t=r/2,o=l*t,e.vertex(t,0),e.bezierVertex(t,-o,o,-t,0,-t),e.bezierVertex(-o,-t,-t,-o,-t,0),e.bezierVertex(-t,o,-o,t,0,t),e.bezierVertex(o,t,t,o,t,0)}),!0),pop(),push(),e.noFill(),circle(0,0,n),circle(0,0,r),pop(),pop()},dottedLine=(t,o,r,n,l=10,s=!0)=>{const c=e.dist(t,o,r,n);for(let s=0;s<c;s+=l)e.point(e.map(s,0,c,t,r),e.map(s,0,c,o,n));s&&e.point(r,n)},drawShape=(t,o,r)=>{o=o&&e.CLOSE,e.beginShape(r),t(),e.endShape(o)},edge=(t,o,r,n)=>{"degrees"==angleMode&&(n=e.radians(n));const l=t+r*Math.cos(n),s=o+r*Math.sin(n);line(t,o,l,s)},heart=(t,o,r)=>{const n=o-2*r/5,l=o+r,s=o-6*r/5,c=o-2*r/5;let a=t+r/2,i=t+9*r/5;drawShape((()=>{e.vertex(t,n),e.bezierVertex(a,s,i,c,t,l),a=2*t-a,i=2*t-i,e.bezierVertex(i,c,a,s,t,n)}),!0)},parallelogram=(t,o,r,n,l,s)=>{const c=r-t,a=n-o;e.quad(t,o,r,n,l+c,s+a,l,s)},polygon=(t,o,r,n,l)=>{const s=Math.cos(Math.PI)<0?2*Math.PI:360;push(),e.translate(t,o),e.rotate(null==l?-s/4:l),drawShape((()=>{for(let t=0;t<s;t+=s/r)e.vertex(n*Math.cos(t),n*Math.sin(t))}),!0),pop()},rectangle=(t,o,r,n=r,l,s,c,a)=>{null==l?e.rect(t,o,r,n):null==s?e.rect(t,o,r,n,l):null==c?e.rect(t,o,r,n,l,l,s,s):null==a?e.rect(t,o,r,n,l,s,c,0):e.rect(t,o,r,n,l,s,c,a)},rhombus=(t,o,r,n,l,s)=>{const c=e.dist(t,o,r,n)/e.dist(t,o,l,s);l=t+c*(l-t),s=o+c*(s-o),parallelogram(t,o,r,n,l,s)},square=(t,o,r,n,l,s,c)=>{null==n?e.rect(t,o,r,r):null==l?e.rect(t,o,r,r,n):null==s?e.rect(t,o,r,r,n,n,l,l):null==c?e.rect(t,o,r,r,n,l,s,0):e.rect(t,o,r,r,n,l,s,c)},star=(t,o,r,n=5,l)=>{const s=Math.cos(Math.PI)<0?e.TWO_PI:360,c=r*Math.sin(.05*s)/Math.sin(.35*s);push(),e.translate(t,o),e.rotate(null==l?-s/4:l),drawShape((()=>{let t;for(let o=0;o<s;o+=s/(2*n))t=t===r?c:r,e.vertex(t*Math.cos(o),t*Math.sin(o))}),!0),pop()},trapezoid=(t,o,r,n,l)=>{const s=Math.max(n,l);e.quad(t+(s-n)/2,o,t+(s-n)/2+n-1,o,t+(s-l)/2+l-1,o+r-1,t+(s-l)/2,o+r-1)};