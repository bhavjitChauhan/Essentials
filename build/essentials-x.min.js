/**
 * Essentials X.
 *
 * The Essentials library provides utility functions for the Khan Academy
 * Processing Environment.
 *
 * @link https://github.com/bhavjitChauhan/Essentials
 * @file Minified CDN Essentials Build
 * @author Bhavjit Chauhan
 */

_environment_=this instanceof Window?"CDN":"KA",_console_style_="font-family:system-ui;font-size:0.75rem;",_core_initialized_="undefined"!=typeof ESSENTIALS_CORE,ESSENTIALS_CORE=!0,ESSENTIALS_VERSION="2.0.0",ESSENTIALS_ASCII="\n    _/_/_/_/    _/_/_/    _/_/_/  _/_/_/_/  _/      _/  _/_/_/_/_/  _/_/_/    _/_/    _/          _/_/_/\n   _/        _/        _/        _/        _/_/    _/      _/        _/    _/    _/  _/        _/\n  _/_/_/      _/_/      _/_/    _/_/_/    _/  _/  _/      _/        _/    _/_/_/_/  _/          _/_/\n _/              _/        _/  _/        _/    _/_/      _/        _/    _/    _/  _/              _/\n_/_/_/_/  _/_/_/    _/_/_/    _/_/_/_/  _/      _/      _/      _/_/_/  _/    _/  _/_/_/_/  _/_/_/\n\n",_silent_="undefined"!=typeof _silent_&&_silent_,_silent_||_core_initialized_||console.info(`%cESSENTIALS\n%cThe Khan Academy utility library.\n\n${_environment_} Build\nVersion ${ESSENTIALS_VERSION}\nCopyright Â© 2021 Bhavjit Chauhan\nhttps://github.com/bhavjitChauhan/Essentials`,"color:transparent;\nfont-size:3rem;\nbackground-image: url('https://github.com/bhavjitChauhan/Essentials/blob/master/logo.png?raw=true');\nbackground-position:center;\nbackground-repeat: no-repeat;\nbackground-size:contain;",_console_style_),_eval=eval,p=Processing.instances[0],[LEFT,RIGHT,TOP,BOTTOM,UP,DOWN]=[p.LEFT,p.RIGHT,p.TOP,p.BOTTOM,p.UP,p.DOWN],TOP_LEFT=1,TOP_RIGHT=2,BOTTOM_RIGHT=3,BOTTOM_LEFT=4,WIDTH=p.width,HEIGHT=p.height,HALF_WIDTH=WIDTH/2,HALF_HEIGHT=HEIGHT/2,ctx=p.externals.context,WHITE=4294967295,SILVER=4290822336,GREY=4286611584,BLACK=4278190080,RED=4294901760,MAROON=4286578688,ORANGE=4294944e3,YELLOW=4294967040,OLIVE=4286611456,LIME=4278255360,GREEN=4278222848,AQUA=4278255615,TEAL=4278222976,BLUE=4278190335,NAVY=4278190208,FUCHSIA=4294902015,PURPLE=4286578816,TRANSPARENT=16777215,_hash=(e,t=0)=>{const o=2654435761,r=2246822519,n=3266489917,a=668265263,s=374761393,p=e;let l=t+s&4294967295,i=0;if(p.length>=16){const n=[t+o+r&4294967295,t+r&4294967295,t+0&4294967295,t-o&4294967295],a=e,s=a.length-16;let p=0;for(i=0;(4294967280&i)<=s;i+=4){const e=i,t=(a[e+0]+(a[e+1]<<8))*r+((a[e+2]+(a[e+3]<<8))*r<<16);let s=n[p]+t&4294967295;s=s<<13|s>>>19;const l=65535&s,c=s>>>16;n[p]=l*o+(c*o<<16)&4294967295,p=p+1&3}l=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}l=l+e.length&4294967295;const c=e.length-4;for(;i<=c;i+=4){const e=i;l=l+((p[e+0]+(p[e+1]<<8))*n+((p[e+2]+(p[e+3]<<8))*n<<16))&4294967295,l=l<<17|l>>>15,l=(65535&l)*a+((l>>>16)*a<<16)&4294967295}for(;i<p.length;++i){l+=p[i]*s,l=l<<11|l>>>21,l=(65535&l)*o+((l>>>16)*o<<16)&4294967295}return l^=l>>>15,l=((65535&l)*r&4294967295)+((l>>>16)*r<<16),l^=l>>>13,l=((65535&l)*n&4294967295)+((l>>>16)*n<<16),(l<0?l+4294967296:l).toString(16)},_pointOnRect=(e,t,o)=>{for(o=-o;o<-Math.PI;)o+=p.TAU;for(;o>Math.PI;)o-=p.TAU;const r=Math.atan2(t,e),n=Math.tan(o);let a;a=o>-r&&o<=r?1:o>r&&o<=Math.PI-r?2:o>Math.PI-r||o<=-(Math.PI-r)?3:4;const s={x:e/2,y:t/2};let l=1,i=1;switch(a){case 1:case 2:i=-1;break;case 3:case 4:l=-1}return 1==a||3==a?(s.x+=l*(e/2),s.y+=i*(e/2)*n):(s.x+=l*(t/(2*n)),s.y+=i*(t/2)),s},clearLogs=()=>p._clearLogs(),noop=function(){},showGraphics=()=>drawGraphics(),attempt=(e,...t)=>{try{return e(...t)}catch(e){return e instanceof Error?e:new Error(e)}},chainAsync=e=>{let t=0;const o=_.last(e),r=()=>{const n=e[t++];n===o?n():n(r)};r()},clean=e=>{const t=e.toString().replace(/__env__\.KAInfiniteLoopCount\+\+;/g,"").replace(/if \(__env__\.KAInfiniteLoopCount > 1000\) {[\s]+__env__\.KAInfiniteLoopProtect\('[^']*'\);[^}]+}/g,"").replace(/__env__\.PJSOutput\.applyInstance\((__env__\.\S+), '\S+'\)/g,"new $1");return Object.constructor(`return (function(__env__) {return ${t};});`)()(p)},complement=e=>(...t)=>!e(...t),evalPJS=e=>_eval(`with (p) ${e}`),drawGraphics=(e,t,o,r,n,a=p.P2D)=>{const s=p.createGraphics(o,r,a);n.call(s),p.image(s,e,t)},generateID=(e=8)=>{const t=e%2!=0,o=_eval(`new Uint8Array(Math.ceil(${e} / 2))`);crypto.getRandomValues(o);const r=Array.from(o,(e=>e.toString(16).padStart(2,"0"))).join("");return t?r.slice(0,-1):r},generateUUID=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(_eval("new Uint8Array(1)"))[0]&15>>e/4).toString(16))),getColonTime=function(){return(new Date).toTimeString().slice(0,8)},inherit=(e,t)=>{Object.setPrototypeOf(e.prototype,t.prototype),e.prototype.constructor=e,t.prototype.constructor===Object&&(t.prototype.constructor=t)},isEmptyFunction=e=>_.isFunction(e)&&/^function[^{]*[{]\s*[}]\s*$/.test(Function.prototype.toString.call(e)),isFont=e=>e instanceof p.PFont,isImage=e=>e instanceof p.PImage,isSound=e=>e.audio instanceof Audio,mostPerformant=(e,t=1e4,o=!1)=>{const r=e.map((e=>{const o=performance.now();for(let o=0;o<t;o++)e();return performance.now()-o}));return o?r:r.indexOf(Math.min(...r))},pop=()=>{p.popStyle(),ctx.restore()},printf=function(e,...t){e=e.toString();for(const o of t)e=e.replace(/(?<!\\)%/,o);e=e.replaceAll(/\\%/g,"%"),p.println(e)},randomInt=(e,t)=>_.random(e,t),push=()=>{p.pushStyle(),ctx.save()},restart=()=>{"undefined"!=typeof COLOR_ESSENTIALS&&(noShadow(),shadowBlur(0),shadowOffset(0,0)),"undefined"!=typeof SHAPE_ESSENTIALS&&(noStrokeDash(),strokeDashOffset(0)),"undefined"!=typeof EXTERNAL_ESSENTIALS&&(clearElements(),closeLog(),exitPointerLock(),forceAllowScroll()),p.colorMode(p.RGB,255),p.draw=noop,p.Program.restart()},roundTo=(e,t)=>t?Math.round(e/t)*t:e,timeTaken=(e,t="default")=>{console.time(`timeTaken#${t}`);const o=e();return console.timeEnd(`timeTaken#${t}`),o},_color_initialized_="undefined"!=typeof COLOR_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Color Essentials depends on the Essentials Core."):(COLOR_ESSENTIALS=!0,_silent_||_color_initialized_||console.info("%cColor Essentials",_console_style_)),BRIGHTNESS="brightness",LUMINANCE="brightness",CONTRAST="contrast",DROP_SHADOW="drop-shadow",GRAYSCALE=p.GRAY,HUE_ROTATE="hue-rotate",OPACITY="opacity",SATURATE="saturate",SEPIA="sepia",RGB_COLOR_RANGE=[255,255,255,255],HSB_COLOR_RANGE=[360,100,100,100],MEDIUM_VIOLET_RED=4291237253,DEEP_PINK=4294907027,PALE_VIOLET_RED=4292571283,HOT_PINK=4294928820,LIGHT_PINK=4294948545,PINK=4294951115,DARK_RED=4287299584,RED=4294901760,FIRE_BRICK=4289864226,CRIMSON=4292613180,INDIAN_RED=4291648604,LIGHT_CORAL=4293951616,SALMON=4294606962,DARK_SALMON=4293498490,LIGHT_SALMON=4294942842,ORANGE_RED=4294919424,TOMATO=4294927175,DARK_ORANGE=4294937600,CORAL=4294934352,ORANGE=4294944e3,DARK_KHAKI=4290623339,GOLD=4294956800,KHAKI=4293977740,PEACH_PUFF=4294957753,YELLOW=4294967040,PALE_GOLDENROD=4293847210,MOCCASIN=4294960309,PAPAYA_WHIP=4294963157,LIGHT_GOLDENROD_YELLOW=4294638290,LEMON_CHIFFON=4294965965,LIGHT_YELLOW=4294967264,MAROON=4286578688,BROWN=4289014314,SADDLE_BROWN=4287317267,SIENNA=4288696877,CHOCOLATE=4291979550,DARK_GOLDENROD=4290283019,PERU=4291659071,ROSY_BROWN=4290547599,GOLDENROD=4292519200,SANDY_BROWN=4294222944,TAN=4291998860,BURLY_WOOD=4292786311,WHEAT=4294303411,NAVAJO_WHITE=4294958765,BISQUE=4294960324,BLANCHED_ALMOND=4294962125,CORNSILK=4294965468,DARK_GREEN=4278215680,GREEN=4278222848,DARK_OLIVE_GREEN=4283788079,FOREST_GREEN=4280453922,SEA_GREEN=4281240407,OLIVE=4286611456,OLIVE_DRAB=4285238819,MEDIUM_SEA_GREEN=4282168177,LIME_GREEN=4281519410,LIME=4278255360,SPRING_GREEN=4278255487,MEDIUM_SPRING_GREEN=4278254234,DARK_SEA_GREEN=4287609999,MEDIUM_AQUAMARINE=4284927402,YELLOW_GREEN=4288335154,LAWN_GREEN=4286381056,CHARTREUSE=4286578432,LIGHT_GREEN=4287688336,GREEN_YELLOW=4289593135,PALE_GREEN=4288215960,TEAL=4278222976,DARK_CYAN=4278225803,LIGHT_SEA_GREEN=4280332970,CADET_BLUE=4284456608,DARK_TURQUOISE=4278243025,MEDIUM_TURQUOISE=4282962380,TURQUOISE=4282441936,AQUA=4278255615,CYAN=4278255615,AQUAMARINE=4286578644,PALE_TURQUOISE=4289720046,LIGHT_CYAN=4292935679,NAVY=4278190208,DARK_BLUE=4278190219,MEDIUM_BLUE=4278190285,BLUE=4278190335,MIDNIGHT_BLUE=4279834992,ROYAL_BLUE=4282477025,STEEL_BLUE=4282811060,DODGER_BLUE=4280193279,DEEP_SKY_BLUE=4278239231,CORNFLOWER_BLUE=4284782061,SKY_BLUE=4287090411,LIGHT_SKY_BLUE=4287090426,LIGHT_STEEL_BLUE=4289774814,LIGHT_BLUE=4289583334,POWDER_BLUE=4289781990,INDIGO=4283105410,PURPLE=4286578816,DARK_MAGENTA=4287299723,DARK_VIOLET=4287889619,DARK_SLATE_BLUE=4282924427,BLUE_VIOLET=4287245282,DARK_ORCHID=4288230092,FUCHSIA=4294902015,MAGENTA=4294902015,SLATE_BLUE=4285160141,MEDIUM_SLATE_BLUE=4286277870,MEDIUM_ORCHID=4290401747,MEDIUM_PURPLE=4287852763,ORCHID=4292505814,VIOLET=4293821166,PLUM=4292714717,THISTLE=4292394968,LAVENDER=4293322490,REBECCA_PURPLE=4284887961,MISTY_ROSE=4294960353,ANTIQUE_WHITE=4294634455,LINEN=4294635750,BEIGE=4294309340,WHITE_SMOKE=4294309365,LAVENDER_BLUSH=4294963445,OLD_LACE=4294833638,ALICE_BLUE=4293982463,SEASHELL=4294964718,GHOST_WHITE=4294506751,HONEYDEW=4293984240,FLORAL_WHITE=4294966e3,AZURE=4293984255,MINT_CREAM=4294311930,SNOW=4294966010,IVORY=4294967280,WHITE=4294967295,BLACK=4278190080,DARK_SLATE_GRAY=DARK_SLATE_GREY=4281290575,DIM_GRAY=DIM_GREY=4285098345,SLATE_GRAY=SLATE_GREY=4285563024,GREY=4286611584,LIGHT_SLATE_GRAY=LIGHT_SLATE_GREY=4286023833,DARK_GRAY=DARK_GREY=4289309097,SILVER=4290822336,LIGHT_GRAY=LIGHT_GREY=4292072403,GAINSBORO=4292664540,_createColor=(e,t=getColorMode(),o=t)=>{const r=o==(t==p.RGB?p.HSB:p.RGB);let n=getAlphaRange();return o!=t&&(n=t==p.RGB?RGB_COLOR_RANGE[3]:HSB_COLOR_RANGE[3]),e=_parseColorArray(e,n),r&&(p.pushStyle(),presetColorMode(t)),result=p.color.apply(null,e),r&&p.popStyle(),result},_appendFilter=e=>{if("none"==ctx.filter)return ctx.filter=e;ctx.filter+=e},_parseColorArray=(e,t=getAlphaRange(),o=!1)=>{switch(_.isNumber(e)&&(e=[e]),e.length){case 1:e=[e[0],e[0],e[0],o?e[0]:t];break;case 2:e=[e[0],e[0],e[0],e[1]];break;case 3:e.push(t)}return e},clearEffects=()=>ctx.filter="none",getAlphaRange=()=>p.alpha(WHITE),getBlueRange=()=>p.blue(WHITE),getBrightnessRange=()=>getBlueRange(),getGreenRange=()=>p.green(WHITE),getHueRange=()=>getRedRange(),getRedRange=()=>p.red(WHITE),getSaturationRange=()=>getGreenRange(),getShadow=()=>hexToRGB(ctx.shadowColor),getShadowBlur=()=>ctx.shadowBlur,isDefaultColorRange=()=>getColorRange()==RGB_COLOR_RANGE,noShadow=()=>shadow(TRANSPARENT),getShadowOffset=()=>[ctx.shadowOffsetX,ctx.shadowOffsetY],angularGradient=(e,t,o,n,a,s,l=0,i=5)=>{l-=90;const c=Math.ceil(10*p.degrees(Math.atan(i/Math.max(o,n))))/10;if(p.pushStyle(),1==i){p.strokeWeight(1.5);for(let i=l;i<l+359;i+=c)p.stroke(p.lerpColor(a,s,(i-l)/360)),r=p.radians(i),p.line(e+o/2,t+n/2,p.map(Math.cos(r),-1,1,e,e+o),p.map(Math.sin(r),-1,1,t,t+n))}else{p.strokeWeight(1);for(let r=l;r<l+359;r+=c){const i=p.lerpColor(a,s,(r-l)/360);p.stroke(i),p.fill(i),r1=p.radians(r),r2=p.radians(r-c),p.triangle(e+o/2,t+n/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+n),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+n))}}p.popStyle()},circularGradient=(e,t,o,n,a,s,l=0,i=5)=>{const c=Math.ceil(10*p.degrees(Math.atan(i/Math.max(o,n))))/10;if(p.pushStyle(),1==i){p.strokeWeight(1.5);for(let i=l-1;i<l+180;i+=c)p.stroke(p.lerpColor(a,s,Math.abs((i-l)/180))),r=p.radians(i),p.line(e+o/2,t+n/2,p.map(Math.cos(r),-1,1,e,e+o),p.map(Math.sin(r),-1,1,t,t+n));for(let i=l-1;i>l-180;i-=c)p.stroke(p.lerpColor(a,s,Math.abs((i-l)/180))),r=p.radians(i),p.line(e+o/2,t+n/2,p.map(Math.cos(r),-1,1,e,e+o),p.map(Math.sin(r),-1,1,t,t+n))}else{p.strokeWeight(1);for(let r=l-1;r<l+180;r+=c){const i=p.lerpColor(a,s,Math.abs((r-l)/180));p.stroke(i),p.fill(i),r1=p.radians(r),r2=p.radians(r-c),p.triangle(e+o/2,t+n/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+n),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+n))}r1=p.radians(l-180),r2=p.radians(l-180-c),p.stroke(s),p.fill(s),p.triangle(e+o/2,t+n/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+n),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+n));for(let r=l-1;r>l-180;r-=c){const i=p.lerpColor(a,s,Math.abs((r-l)/180));p.stroke(i),p.fill(i),r1=p.radians(r),r2=p.radians(r-c),p.triangle(e+o/2,t+n/2,p.map(Math.cos(r1),-1,1,e,e+o),p.map(Math.sin(r1),-1,1,t,t+n),p.map(Math.cos(r2),-1,1,e,e+o),p.map(Math.sin(r2),-1,1,t,t+n))}}p.popStyle()},p.blur=(e=5)=>{_.isNumber(e)&&(e=`${e}px`),_appendFilter(`blur(${e})`)},contrast=e=>_appendFilter(`contrast(${e}%)`),dropShadow=(e,t=e,o=5,r="#000")=>{_.isNumber(r)&&(r=RGBToHex(r)),_appendFilter(`drop-shadow(${e}px ${t}px ${o}px ${r})`)},effect=(e,...t)=>{switch(e){case p.BLUR:return p.blur(...t);case BRIGHTNESS:case LUMINANCE:return luminance(...t);case CONTRAST:return contrast(...t);case DROP_SHADOW:return dropShadow(...t);case p.GRAY:case GRAYSCALE:return grayscale(...t);case HUE_ROTATE:return hueRotate(...t);case p.INVERT:return invert(...t);case OPACITY:return opacity(...t);case SATURATE:return saturate(...t);case SEPIA:return sepia(...t)}_appendFilter(e)},fastBlur=(e=10,t=0,o=0,r=WIDTH,n=r||HEIGHT)=>{t<0&&(r+=t,t=0),o<0&&(n+=o,o=0),e=p.constrain(e,0,Math.min(r,n)),p.image(p.get(t,o,r,n),t,o,r/e,n/e),p.image(p.get(t,o,r/e,n/e),t,o,r,n)},getColorMode=()=>-65536==p.color(getRedRange(),0,0)?p.RGB:p.HSB,getColorRange=()=>[p.red,p.green,p.blue,p.alpha].map((e=>e.call(null,WHITE))),getFill=(e=!0)=>(e&&p.rect(0,0,"%"),hexToRGB(ctx.fillStyle)),getStroke=(e=!0)=>(e&&p.rect(0,0,"%"),hexToRGB(ctx.strokeStyle)),grayscale=(e=100)=>_appendFilter(`grayscale(${e}%)`),hexToHSB=(e,t=!0)=>t?hexToRGB(e):RGBToHSB.apply(p,hexToRGB(e,!1)),hexToRGB=(e,t=!0)=>{const o=getColorMode();switch((e=e.replace("#","")).length){case 3:case 6:e=e.replace(/^([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,o,r)=>t+t+o+o+r+r));break;case 4:case 8:e=e.replace(/^([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,o,r,n)=>t+t+o+o+r+r+n+n))}let r=e.match(/.{2}/g).map((e=>parseInt(e,16)));3==r.length&&r.push(RGB_COLOR_RANGE[3]),isDefaultColorRange()||o!=p.RGB||(r=mapColorRange(r));let n=r;return t&&(n=_createColor(r,p.RGB,o)),n},HSBToHex=(...e)=>{let t=!0,o=!0;_.every(_.last(e,2),_.isBoolean)?(o=e.pop(),t=e.pop()):_.isBoolean(_.last(e))&&(t=e.pop());const r=!isDefaultColorRange();r&&p.pushStyle(),presetColorMode(p.RGB);const n=HSBToRGB(...e).map((e=>Math.round(e)));return r&&p.popStyle(),RGBToHex(...n,t,o)},HSBToRGB=(...e)=>{const t=getColorRange(),o=getColorMode()==p.RGB?t:RGB_COLOR_RANGE;let r,n,a,s;switch(e.length){case 1:{const t=!isDefaultColorRange();t&&(p.pushStyle(),presetColorMode(p.HSB)),[r,n,a,s]=toHSB(e[0]),t&&p.popStyle(),r/=60,n/=100,a/=100,s/=100;break}case 3:case 4:4==e.length&&(s=e.pop()/HSB_COLOR_RANGE[3]),r=e.shift()/60,[n,a]=e.map(((e,t)=>e/HSB_COLOR_RANGE[t+1]))}f=(e,t=(e+r)%6)=>a-a*n*Math.max(Math.min(t,4-t,1),0);let l=[f(5),f(3),f(1),s||1];return l=l.map(((e,t)=>e*o[t])),l},hueRotate=e=>_appendFilter(`hue-rotate(${e}${"degrees"==p.angleMode?"deg":"rad"})`),invert=(e=100)=>_appendFilter(`invert(${e}%)`),linearGradient=e=>{let{x:t,y:o,width:r,height:n,stops:a,angle:s,x0:l,y0:i,x1:c,y1:h}=e;if(n=n||r,_.isNumber(s)){"degrees"==p.angleMode&&(s=p.radians(s));const e=_pointOnRect(r,n,s);l=l||t+r-e.x,i=i||o+n-e.y,c=c||t+e.x,h=h||o+e.y}push();const d=ctx.createLinearGradient(l,i,c,h);_.every(a,_.isArray)||(a=a.map(((e,t,o)=>[p.norm(t,0,o.length-1),e])));for(const e of a)_.isNumber(e[1])&&(e[1]=RGBToHex(e[1],!1)),d.addColorStop(...e);ctx.fillStyle=d,ctx.fillRect(t,o,r,n),pop()},luminance=e=>_appendFilter(`brightness(${e}%)`),opacity=e=>_appendFilter(`opacity(${e}%)`),presetColorMode=e=>{switch(e||(e=getColorMode()==p.RGB?p.HSB:p.RGB),e){case p.RGB:p.colorMode(p.RGB,255);break;case p.HSB:p.colorMode(p.HSB,360,100,100,100)}},mapColorRange=(e,t)=>{const o=getColorRange();return t?(t=_parseColorArray(t,o[3],!0),e=_parseColorArray(e,o[3]).map(((e,r)=>p.map(e,0,o[r],0,t[r])))):e=_parseColorArray(e,255).map(((e,t)=>p.map(e,0,255,0,o[t]))),e},radialGradient=e=>{let{x:t,y:o,width:r,height:n,stops:a,x0:s,y0:l,r0:i,x1:c,y1:h,r1:d}=e;n=n||r;const u=t+r/2,E=o+n/2;_.isNumber(s)||(s=u),_.isNumber(l)||(l=E),i=i||0,_.isNumber(c)||(c=u),_.isNumber(h)||(h=E),d=d||r/2,push();const S=ctx.createRadialGradient(s,l,i,c,h,d);_.every(a,_.isArray)||(a=a.map(((e,t,o)=>[p.norm(t,0,o.length-1),e])));for(const e of a)_.isNumber(e[1])&&(e[1]=RGBToHex(e[1],!1)),S.addColorStop(...e);ctx.fillStyle=S,ctx.fillRect(t,o,r,n),pop()},RGBToHex=(...e)=>{let t,o=!0,r=!0;switch(_.every(_.last(e,2),_.isBoolean)?(r=e.pop(),o=e.pop()):_.isBoolean(_.last(e))&&(o=e.pop()),e.length){case 1:{const o=p.alpha(e[0]);t=p.hex(e[0],6)+(o!=RGB_COLOR_RANGE[3]?o.toString(16).padStart(2,"0"):"");break}case 3:case 4:t=((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1),4==e.length&&e[3]!=RGB_COLOR_RANGE[3]&&(t+=e[3].toString(16).padStart(2,"0"))}return o&&(8==t.length&&(t=t.replace(/(\w)\1(\w)\2(\w)\3(\w)\4/,"$1$2$3$4")),6==t.length&&(t=t.replace(/(\w)\1(\w)\2(\w)\3/,"$1$2$3"))),(r?"#":"")+t.toUpperCase()},RGBToHSB=(...e)=>{const t=getColorRange(),o=getColorMode()==p.HSB?t:HSB_COLOR_RANGE,r=[e=>p.map(e,0,6,0,o[0]),e=>e*o[1],e=>e*o[2],e=>e*o[3]];let n,a,s,l;switch(e.length){case 1:{const t=!isDefaultColorRange();t&&(p.pushStyle(),presetColorMode(p.RGB)),[n,a,s,l]=toRGB(e[0]).map(((e,t)=>e/RGB_COLOR_RANGE[t])),t&&p.popStyle();break}case 3:case 4:4==e.length&&(l=e.pop()/RGB_COLOR_RANGE[3]),[n,a,s]=e.map(((e,t)=>e/RGB_COLOR_RANGE[t]))}const i=Math.max(n,a,s),c=i-Math.min(n,a,s),_=c&&(i==n?(a-s)/c:i==a?2+(s-n)/c:4+(n-a)/c);let h=[_<0?_+6:_,i&&c/i,i,l||1];return h=h.map(((e,t)=>r[t](e))),h},saturate=e=>_appendFilter(`saturate(${e}%)`),sepia=(e=100)=>_appendFilter(`sepia(${e}%)`),shadow=(...e)=>{let t=e[0];e.length>1&&(t=p.color.apply(null,e)),_.isNumber(e[0])&&(t=RGBToHex(t,!1)),ctx.shadowColor=t},shadowBlur=e=>ctx.shadowBlur=e,shadowOffset=(e,t=e)=>{_.isNumber(e)&&(ctx.shadowOffsetX=e),ctx.shadowOffsetY=t},toHSB=(...e)=>{switch(e.length){case 1:{const t=e[0];if(_.isNumber(t)){const e=getColorMode()==p.RGB;e&&(p.pushStyle(),presetColorMode(p.HSB));const o=[p.hue(t),p.saturation(t),p.brightness(t),p.alpha(t)];return e&&p.popStyle(),o}return hexToHSB(t)}case 3:case 4:return RGBToHSB.apply(p,e)}},toRGB=(...e)=>{switch(e.length){case 1:{const t=e[0];if(_.isNumber(t)){const e=getColorMode()==p.HSB;e&&(p.pushStyle(),presetColorMode(p.RGB));const o=[p.red(t),p.green(t),p.blue(t),p.alpha(t)];return e&&p.popStyle(),o}return hexToRGB(t)}case 3:case 4:return HSBToRGB.apply(p,e)}},linearGradientOld=(t,o,r,n,a,s,p=RIGHT,l=5)=>{switch(push(),e.strokeWeight(1),p){case LEFT:case RIGHT:if(p==LEFT&&([a,s]=[s,a]),1==l)for(let p=0;p<r;p++)e.stroke(e.lerpColor(a,s,p/r)),e.line(t+p,o,t+p,o+n);else for(let p=0;p<r;p+=l){const i=e.lerpColor(a,s,p/r);e.stroke(i),e.fill(i),p+l>r?e.rect(t+p,o,r-p,n):e.rect(t+p,o,l,n)}break;case TOP:case UP:case BOTTOM:case DOWN:if(p!=TOP&&p!=UP||([a,s]=[s,a]),1==l)for(let p=0;p<n;p++)e.stroke(e.lerpColor(a,s,p/n)),e.line(t,o+p,t+r,o+p);else for(let p=0;p<n;p+=l){const i=e.lerpColor(a,s,p/n);e.stroke(i),e.fill(i),p+l>r?e.rect(t,o+p,r,n-p):e.rect(t,o+p,r,l)}break;case TOP_LEFT:case BOTTOM_RIGHT:if(p==TOP_LEFT&&([a,s]=[s,a]),1==l){for(let p=0;p<r;p++)e.stroke(e.lerpColor(a,s,p/r/2)),e.line(t+p,o,t,o+e.map(p,0,r,0,n));for(let p=0;p<r;p++)e.stroke(e.lerpColor(a,s,p/r/2+.5)),e.line(t+p,o+n,t+r,o+e.map(p,0,r,0,n))}else{const e=Math.max(r,n)*Math.sqrt(2);showGraphics(t,o,r,n,(function(){this.angleMode="degrees",this.rotate(-45);for(let t=0;t<e;t+=l){const o=this.lerpColor(a,s,t/e);this.stroke(o),this.fill(o),t+l>e?this.rect(-e/2,t,e,e-t):this.rect(-e/2,t,e,l)}}))}break;case TOP_RIGHT:case BOTTOM_LEFT:if(p==TOP_RIGHT&&([a,s]=[s,a]),1==l){for(let p=0;p<r;p++)e.stroke(e.lerpColor(a,s,p/r/2)),e.line(t+r-p,o,t+r,o+e.map(p,0,r,0,n));for(let p=0;p<r;p++)e.stroke(e.lerpColor(a,s,p/r/2+.5)),e.line(t+r-p,o+n,t,o+e.map(p,0,r,0,n))}else{const e=Math.max(r,n)*Math.sqrt(2);showGraphics(t,o,r,n,(function(){this.angleMode="degrees",this.rotate(45);for(let t=0;t<e;t+=l){const o=this.lerpColor(a,s,t/e);this.stroke(o),this.fill(o),t+l>e?this.rect(0,t-e/2,e,e-t):this.rect(0,t-e/2,e,l)}}))}}pop()},radialGradientOld=(t,o,r,n,a,s,p=5)=>{push(),e.strokeWeight(1);const l=Math.max(r,n);if(1==p){e.noFill();for(let p=0;p<l;p++)e.stroke(e.lerpColor(s,a,p/l)),e.arc(t,o,r-e.map(p,0,l,0,r),n-e.map(p,0,l,0,n),0,360)}else for(let i=0;i<l;i+=p){const p=e.lerpColor(s,a,i/l);e.stroke(p),e.fill(p),e.ellipse(t,o,r-e.map(i,0,l,0,r),n-e.map(i,0,l,0,n))}pop()},_text_initialized_="undefined"!=typeof TEXT_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Text Essentials depends on the Essentials Core."):(TEXT_ESSENTIALS=!0,_silent_||_text_initialized_||console.info("%cText Essentials",_console_style_)),f=e=>format(e),getTextSize=()=>ctx.font.match(/\d+/),fastGradientText=(e,t,o,r,n)=>{if(p.pushStyle(),e.includes("\n")){const a=e.split("\n");for(const e in a)fastGradientText(a[e],t,o+e*textAscent(),r,n)}else for(let a=0;a<e.length;a++)p.fill(p.lerpColor(r,n,a/e.length)),p.text(e[a],t+p.textWidth(e.slice(0,a)),o);p.popStyle()},font=function(e){let t=Array.from(arguments).slice(1);t.push("");let o,r=t.find((function(e){return _.isBoolean(e)}));r=!_.isBoolean(r)&&!0,t=_.without(t,!0,!1);let n=t.find((function(e){return!isNaN(e)}));if(isFont(e)){o=e,n=n||+o.css.match(/\d+/)[0],previousCSS=o.css.split(" "),previousProperties=previousCSS.slice(0,-2).filter((function(e){return"normal"!==e})),t=_.union(t,previousProperties);let r=t.filter((function(e){return!!_.isString(e)&&"-"==e.charAt(0)}));r=r.map((function(e){return e.substr(1)})),t=t.filter((function(e){return!!_.isString(e)&&"-"!=e.charAt(0)})),t=_.difference(t,r).join(" "),o.css=`${t} ${n}px/${n+2}px ${_.last(previousCSS)}`}else n=n||12,o=p.createFont(e,n),t=_.without(t,n),o.css=(!_.isEmpty(t)&&t.join(" ")+" ")+`${n}px/${n+2}px ${e}`;return r&&p.textFont(o),o},format=e=>evalPJS(`\`${e}\``),formatDuration=(e,t,o=!1)=>{if(!e)return"0";if(e<0&&(e=-e),t&&(e=roundTo(e,t)),e<.001)return"0";const r={year:Math.floor(e/31536e6),month:Math.floor(e/2592e6),day:Math.floor(e/864e5),hour:Math.floor(e/36e5)%24,minute:Math.floor(e/6e4)%60,second:Math.floor(e/1e3)%60,millisecond:Math.floor(e)%1e3,microsecond:Math.floor(1e3*e)%1e3};return o?Object.values(r):Object.entries(r).filter((e=>0!==e[1])).map((([e,t])=>`${t} ${pluralize(t,e)}`)).join(", ")},formatNumber=(e,t="en",o={})=>e.toLocaleString(t,o),highlightText=(e,t,o,r=YELLOW)=>{if(/\S/.test(e)){e=e.split("\n"),p.pushStyle(),p.noStroke(),p.rectMode(p.CORNER),p.textAlign(p.LEFT,p.TOP);for(const n in e)e[n]=` ${e[n]} `,p.pushStyle(),p.fill(r),p.rect(t,o+n*p.textAscent()*2,p.textWidth(e[n]),1.75*p.textAscent()),p.popStyle(),p.text(e[n],t,o+n*p.textAscent()*2);p.popStyle()}},lightOrDarkText=e=>{let t,o,r;if("string"==typeof e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);t=parseInt(n[1],16),o=parseInt(n[2],16),r=parseInt(n[3],16)}else t=p.red(e),o=p.green(e),r=p.blue(e);return(t+r+o)/3<225?WHITE:BLACK},multicoloredText=(e,t,o)=>{if(/\S/.test(e)){e=e.split("\n"),p.pushStyle(),p.textAlign(p.LEFT,p.CORNER);for(const r in e){e[r]=e[r].split(/\[|]/);let n=0;for(const a in e[r])if(/\d+,\d+,\d+/.test(e[r][a])){const t=e[r][a].split(",");p.fill.apply(p,t),delete e[r][a],0===n&&(e[r][a-1]+=" "),n+=1}else{const s=p.textWidth(e[r].slice(0,a));p.text(e[r][a],t+s-2*n*p.textWidth(" "),o+r*p.textAscent()*2)}}p.popStyle()}},obfuscate=e=>{let t="";for(const o in _.range(e.length)){let r=e.charCodeAt(o).toString(16);if(r.length<=2){for(;r.length<2;)r="0"+r;t+="\\x"+r}else{for(;r.length<4;)r="0"+r;t+="\\u"+r}}return t},ordinalSuffix=e=>{const t=parseInt(e,10),o=[t%10,t%100],r=["st","nd","rd","th"];return[1,2,3,4].includes(o[0])&&![11,12,13,14,15,16,17,18,19].includes(o[1])?t+r[o[0]-1]:t+r[3]},outlineText=(e,t,o,r=5,n=BLACK)=>{e=e.replace("\n",""),ctx.save(),ctx.lineJoin="round",ctx.lineWidth=r,_.isNumber(n)&&(n="undefined"!=typeof COLOR_ESSENTIALS?RGBToHex(n,!1):"#"+hex(n,6)),ctx.strokeStyle=n,ctx.strokeText(e,t,o),ctx.restore(),p.pushStyle(),p.textAlign(p.LEFT,p.TOP),p.text(e,t,o),p.popStyle()},pluralize=(e,t,o=t+"s")=>{const r=(e,t,o=t+"s")=>[1,-1].includes(Number(e))?t:o;return"object"==typeof e?(t,o)=>r(t,o,e[o]):r(e,t,o)},removeNonASCII=e=>e.replace(/[^\x20-\x7E]/g,""),String.prototype.format=function(){return format(this)},String.prototype.obfuscate=function(){return obfuscate(this)},String.prototype.removeNonASCII=function(){return removeNonASCII(this)},String.prototype.toTitleCase=function(){return toTitleCase(this)},String.prototype.toCamelCase=function(){return toCamelCase(this)},String.prototype.toKebabCase=function(){return toKebabCase(this)},String.prototype.toSnakeCase=function(){return toSnakeCase(this)},toCamelCase=e=>{const t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");return t.slice(0,1).toLowerCase()+t.slice(1)},toKebabCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("-"),toSnakeCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_"),toTitleCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),underlineText=(e,t,o,r=BLACK,n=p.externals.context.font.match(/\d+/)[0]/12)=>{if(/\S/.test(e)){strings=e.split("\n"),p.pushStyle(),p.strokeCap(p.SQUARE),p.strokeWeight(n),p.stroke(r);for(const e in strings)p.line(t,o+p.textAscent()/4+p.textAscent()*e*1.55,t+p.textWidth(strings[e]),o+p.textAscent()/4+p.textAscent()*e*1.55);p.textAlign(p.LEFT,p.CORNER),p.text(e,t,o),p.popStyle()}},wordWrap=(e,t,o="\n")=>e.replace(new RegExp(`(?![^\\n]{1,${t}}$)([^\\n]{1,${t}})\\s`,"g"),"$1"+o),outlineTextOld=(t,o=0,r=e.textAscent(),n=BLACK)=>{if(/\S/.test(t)){push(),e.fill(n);for(let n=-2;n<3;n++){for(let a=-1;a<3;a++)e.text(t,o+n,r+a);e.text(t,o+n,r),e.text(t,o,r+n)}pop(),e.text(t,o,r)}},_shape_initialized_="undefined"!=typeof SHAPE_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Shape Essentials depends on the Essentials Core."):(SHAPE_ESSENTIALS=!0,_silent_||_shape_initialized_||console.info("%cShape Essentials",_console_style_)),getStrokeCap=()=>ctx.lineCap,getStrokeJoin=()=>ctx.lineJoin,getStrokeWeight=()=>ctx.lineWidth,noStrokeDash=()=>strokeDash(),circle=(e,t,o)=>p.ellipse(e,t,o,o),cylinder=(e,t,o,r)=>{if(o=Math.abs(o),r=Math.abs(r),p.pushMatrix(),p.translate(e,t),r>o){const e=Math.cos(Math.PI)<0?p.TWO_PI:360;p.rotate(e/4),cylinder(0,0,r,o)}else{const e=r/2,t=(o-r)/2,n=4/3*(Math.sqrt(2)-1)*e;drawShape((()=>{p.vertex(t,-e),p.bezierVertex(t+n,-e,t+e,-n,t+e,0),p.bezierVertex(t+e,n,t+n,e,t,e),p.vertex(-t,e),p.bezierVertex(-t-n,e,-t-e,n,-t-e,0),p.bezierVertex(-t-e,-n,-t-n,-e,-t,-e)}),!0)}p.popMatrix()},donut=(e,t,o,r)=>{const n=4/3*(Math.sqrt(2)-1);p.pushMatrix(),p.translate(e,t),p.pushStyle(),p.noStroke(),drawShape((()=>{let e=r/2,t=n*e;p.vertex(e,0),p.bezierVertex(e,t,t,e,0,e),p.bezierVertex(-t,e,-e,t,-e,0),p.bezierVertex(-e,-t,-t,-e,0,-e),p.bezierVertex(t,-e,e,-t,e,0),e=o/2,t=n*e,p.vertex(e,0),p.bezierVertex(e,-t,t,-e,0,-e),p.bezierVertex(-t,-e,-e,-t,-e,0),p.bezierVertex(-e,t,-t,e,0,e),p.bezierVertex(t,e,e,t,e,0)}),!0),p.popStyle(),p.pushStyle(),p.noFill(),circle(0,0,r),circle(0,0,o),p.popStyle(),p.popMatrix()},drawShape=(e,t,o)=>{t=t&&p.CLOSE,p.beginShape(o),e(),p.endShape(t)},edge=(e,t,o,r=0)=>{"degrees"==p.angleMode&&(r=p.radians(r));const n=e+o*Math.cos(r),a=t+o*Math.sin(r);p.line(e,t,n,a)},getRotation=(e="degrees"==p.angleMode,t=ctx.getTransform())=>{let o=Math.atan2(t.b,t.a);return o<0&&(o+=2*Math.PI),e?p.degrees(o):o},heart=(e,t,o)=>{const r=t-2*o/5,n=t+o,a=t-6*o/5,s=t-2*o/5;let l=e+o/2,i=e+9*o/5;drawShape((()=>{p.vertex(e,r),p.bezierVertex(l,a,i,s,e,n),l=2*e-l,i=2*e-i,p.bezierVertex(i,s,l,a,e,r)}),!0)},parallelogram=(e,t,o,r,n,a)=>{const s=o-e,l=r-t;p.quad(e,t,o,r,n+s,a+l,n,a)},polygon=(e,t,o,r,n)=>{const a=Math.cos(Math.PI)<0?2*Math.PI:360;p.pushMatrix(),p.translate(e,t),p.rotate(null==n?-a/4:n),drawShape((()=>{for(let e=0;e<a;e+=a/o)p.vertex(r*Math.cos(e),r*Math.sin(e))}),!0),p.popMatrix()},rectangle=(e,t,o,r=o,n,a,s,l)=>{null==n?p.rect(e,t,o,r):null==a?p.rect(e,t,o,r,n):null==s?p.rect(e,t,o,r,n,n,a,a):null==l?p.rect(e,t,o,r,n,a,s,0):p.rect(e,t,o,r,n,a,s,l)},rhombus=(e,t,o,r,n,a)=>{const s=p.dist(e,t,o,r)/p.dist(e,t,n,a);n=e+s*(n-e),a=t+s*(a-t),parallelogram(e,t,o,r,n,a)},square=(e,t,o,r,n,a,s)=>{null==r?p.rect(e,t,o,o):null==n?p.rect(e,t,o,o,r):null==a?p.rect(e,t,o,o,r,r,n,n):null==s?p.rect(e,t,o,o,r,n,a,0):p.rect(e,t,o,o,r,n,a,s)},star=(e,t,o,r=5,n)=>{const a=Math.cos(Math.PI)<0?p.TWO_PI:360,s=o*Math.sin(.05*a)/Math.sin(.35*a);p.pushMatrix(),p.translate(e,t),p.rotate(null==n?-a/4:n),drawShape((()=>{let e;for(let t=0;t<a;t+=a/(2*r))e=e===o?s:o,p.vertex(e*Math.cos(t),e*Math.sin(t))}),!0),p.popMatrix()},strokeDash=(...e)=>ctx.setLineDash(e),strokeDashOffset=e=>ctx.lineDashOffset=e,trapezoid=(e,t,o,r,n)=>{const a=Math.max(r,n);p.quad(e+(a-r)/2,t,e+(a-r)/2+r-1,t,e+(a-n)/2+n-1,t+o-1,e+(a-n)/2,t+o-1)},_external_initialized_="undefined"!=typeof EXTERNAL_ESSENTIALS,_set_code_limit_="undefined"!=typeof _set_code_limit_?_set_code_limit_:25,"undefined"==typeof ESSENTIALS_CORE?console.error("External Essentials depends on the Essentials Core."):(EXTERNAL_ESSENTIALS=!0,_silent_||_external_initialized_||console.info("%cExternal Essentials",_console_style_)),CANVAS="#output-canvas",CANVAS_LOG="body div:first div:nth-child(2) div div",_preventDefault=e=>e.preventDefault(),allowScroll=()=>$(CANVAS).off("wheel",_preventDefault),closeLog=()=>$("body > div:nth-child(1) > div:nth-child(3)").click(),exitPointerLock=()=>document.exitPointerLock(),forceAllowScroll=()=>$(CANVAS).off("wheel"),getSelectedText=()=>window.getSelection().toString(),preventScroll=()=>$(CANVAS).on("wheel",_preventDefault),requestPointerLock=()=>$(CANVAS)[0].requestPointerLock(),resizeLog=e=>$("body > div:nth-child(1)").css("height",e),supportsTouchEvents=()=>"ontouchstart"in window,clearElements=()=>$("#essentials").empty(),copyToClipboard=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const o=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),o&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(o))},detectDeviceType=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",detectLanguage=(e="en-US")=>navigator.language||_.isArray(navigator.languages)&&navigator.languages[0]||e,allowBannedProperties=()=>{if(!_.isEmpty(BabyHint.bannedProperties))throw console.warn("Restarting program to allow banned properties..."),BabyHint.bannedProperties={},restart(),"Restarting program to allow banned properties..."},disableLoopProtector=()=>{if(!isEmptyFunction(LoopProtector.prototype.leave))throw console.warn("Restarting program to disable loop protector..."),LoopProtector.prototype.leave=noop,restart(),"Restarting program to disable loop protector..."},drawElement=(e,t={})=>{e instanceof jQuery||(t=e);let o=$("#essentials");if(!o.length){const e=$("<div>",{id:"essentials"});e.css({position:"absolute","pointer-events":"none"}),$(CANVAS).parent().prepend(e),o=$("#essentials")}const r={data:null,id:generateID(),x:0,y:0,width:"max-content",height:"max-content",interactive:!0},{data:n,id:a,x:s,y:p,width:l,height:i,interactive:c}=_.defaults(t,r);return e instanceof jQuery?(n&&e.append(n),(0!==s||0!==p)&&e.css("position","absolute"),!e.attr("id")&&e.attr("id",a),!e.css("left")&&e.css("left",s),!e.css("top")&&e.css("top",p),"0px"==e.css("width")&&e.css("width",l),"0px"==e.css("height")&&e.css("height",i),!e.css("pointer-events")&&e.css("pointer-events","auto")):((e=$("<div>",{html:n,id:a})).css({position:"absolute",left:s,top:p}),l&&e.css("width",l),i&&e.css("height",i),c&&e.css("pointer-events","auto")),Object.prototype.hasOwnProperty.call(t,"css")&&e.css(t.css),o.append(e),a},escapeHTML=e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e))),getLog=e=>{if(!Number.isInteger(e))return;const t=[getLogsText(e),getLogsTime(e)];return _.object(["text","time"],t)},getCode=function(){let e=arguments.callee;for(;!(e.arguments[0]instanceof Processing);)if(e=e.caller,e.arguments[0]instanceof MouseEvent||e.arguments[0]instanceof KeyboardEvent)return console.warn("`getCode` is not supported in Processing event functions.");return e.caller.arguments[0]},getLogs=()=>{const e=["text","time"],t=[];return _.zip(getLogsText(),getLogsTime()).forEach((o=>{t.push(_.object(e,o))})),t},getLogsText=e=>{const t=$(CANVAS_LOG);if(Number.isInteger(e)){if(t.length<=e)return;return t.eq(e).html()}return t.toArray().map((e=>$(e).html()))},getLogsTime=e=>{const t=$(CANVAS_LOG);if(Number.isInteger(e)){if(t.length<=e)return;const o=t.eq(e),r=(new Date).toLocaleDateString(),n=o.parent().attr("title");return new Date(`${r}, ${n}`)}return t.toArray().map(((e,t)=>getLogsTime(t)))},isBrowserTabFocused=()=>!document.hidden,isLocalStorageEnabled=()=>{try{const e=generateUUID();return window.localStorage.setItem(e,null),window.localStorage.removeItem(e),!0}catch(e){return!1}},isSessionStorageEnabled=()=>{try{const e=generateUUID();return window.sessionStorage.setItem(e,null),window.sessionStorage.removeItem(e),!0}catch(e){return!1}},prefersDarkColorScheme=()=>window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,prefersLightColorScheme=()=>window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,printHTML=e=>{e=e.replace(/<a href="([\w+:/.]+)">(?<=>)(.+?)(?=<)<\/a>/g,'<abbr title="Ctrl + Click"><a href="$1" target="_blank">$2</a></abbr>'),p.println(""),$(CANVAS_LOG).last().html(e)},printMD=e=>{let t,o,r="";function n(e,t){r+=`<${t?"/":""}${e}>`}for(let a=0;a<e.length;a++)switch(e[a]){case"*":n("b",t),t=!t;break;case"_":n("i",o),o=!o;break;case"[":try{const t=e.substr(a,e.length),o=t.match(/(?<=\[).+?(?=\])/)[0],n=t.match(/(?<=\().+?(?=\))/)[0];r+=`<a href="${n}">${o}</a>`,a+=o.length+n.length+3;break}catch(e){console.warn(`Markdown error: ${e}`)}break;default:r+=e[a]}printHTML(r)},removeElement=e=>{$(`#${e}`).remove()},__setCodeCallCount="undefined"!=typeof __setCodeCallCount?__setCodeCallCount:0,__setCodeLastCall="undefined"!=typeof __setCodeLastCall?__setCodeLastCall:0,setCode=e=>{if(_.isNumber(_set_code_limit_)&&(Date.now()-__setCodeLastCall<75?__setCodeCallCount++:__setCodeCallCount=0,__setCodeLastCall=Date.now()),__setCodeCallCount>_set_code_limit_)return console.warn("`setCode` limit reached. Set the `_set_code_limit_` flag to `false` to disable this functionality.");window.top.postMessage(JSON.stringify({code:e}))},setLog=(e,t,o=!0)=>{const r=$(CANVAS_LOG);if(r.length<=e)return;const n=r.eq(e);n.html(t),o&&n.parent().attr("title",(new Date).toLocaleTimeString())},unescapeHTML=e=>e.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,(e=>({"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[e]||e)));