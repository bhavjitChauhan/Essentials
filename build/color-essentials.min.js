_color_initialized_="undefined"!=typeof COLOR_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Color Essentials depends on the Essentials Core."):(COLOR_ESSENTIALS=!0,_silent_||_color_initialized_||console.info("%cColor Essentials",_console_style_)),BRIGHTNESS="brightness",LUMINANCE="brightness",CONTRAST="contrast",DROP_SHADOW="drop-shadow",GRAYSCALE=p.GRAY,HUE_ROTATE="hue-rotate",OPACITY="opacity",SATURATE="saturate",SEPIA="sepia",RGB_COLOR_RANGE=[255,255,255,255],HSB_COLOR_RANGE=[360,100,100,100],MEDIUM_VIOLET_RED=4291237253,DEEP_PINK=4294907027,PALE_VIOLET_RED=4292571283,HOT_PINK=4294928820,LIGHT_PINK=4294948545,PINK=4294951115,DARK_RED=4287299584,RED=4294901760,FIRE_BRICK=4289864226,CRIMSON=4292613180,INDIAN_RED=4291648604,LIGHT_CORAL=4293951616,SALMON=4294606962,DARK_SALMON=4293498490,LIGHT_SALMON=4294942842,ORANGE_RED=4294919424,TOMATO=4294927175,DARK_ORANGE=4294937600,CORAL=4294934352,ORANGE=4294944e3,DARK_KHAKI=4290623339,GOLD=4294956800,KHAKI=4293977740,PEACH_PUFF=4294957753,YELLOW=4294967040,PALE_GOLDENROD=4293847210,MOCCASIN=4294960309,PAPAYA_WHIP=4294963157,LIGHT_GOLDENROD_YELLOW=4294638290,LEMON_CHIFFON=4294965965,LIGHT_YELLOW=4294967264,MAROON=4286578688,BROWN=4289014314,SADDLE_BROWN=4287317267,SIENNA=4288696877,CHOCOLATE=4291979550,DARK_GOLDENROD=4290283019,PERU=4291659071,ROSY_BROWN=4290547599,GOLDENROD=4292519200,SANDY_BROWN=4294222944,TAN=4291998860,BURLY_WOOD=4292786311,WHEAT=4294303411,NAVAJO_WHITE=4294958765,BISQUE=4294960324,BLANCHED_ALMOND=4294962125,CORNSILK=4294965468,DARK_GREEN=4278215680,GREEN=4278222848,DARK_OLIVE_GREEN=4283788079,FOREST_GREEN=4280453922,SEA_GREEN=4281240407,OLIVE=4286611456,OLIVE_DRAB=4285238819,MEDIUM_SEA_GREEN=4282168177,LIME_GREEN=4281519410,LIME=4278255360,SPRING_GREEN=4278255487,MEDIUM_SPRING_GREEN=4278254234,DARK_SEA_GREEN=4287609999,MEDIUM_AQUAMARINE=4284927402,YELLOW_GREEN=4288335154,LAWN_GREEN=4286381056,CHARTREUSE=4286578432,LIGHT_GREEN=4287688336,GREEN_YELLOW=4289593135,PALE_GREEN=4288215960,TEAL=4278222976,DARK_CYAN=4278225803,LIGHT_SEA_GREEN=4280332970,CADET_BLUE=4284456608,DARK_TURQUOISE=4278243025,MEDIUM_TURQUOISE=4282962380,TURQUOISE=4282441936,AQUA=4278255615,CYAN=4278255615,AQUAMARINE=4286578644,PALE_TURQUOISE=4289720046,LIGHT_CYAN=4292935679,NAVY=4278190208,DARK_BLUE=4278190219,MEDIUM_BLUE=4278190285,BLUE=4278190335,MIDNIGHT_BLUE=4279834992,ROYAL_BLUE=4282477025,STEEL_BLUE=4282811060,DODGER_BLUE=4280193279,DEEP_SKY_BLUE=4278239231,CORNFLOWER_BLUE=4284782061,SKY_BLUE=4287090411,LIGHT_SKY_BLUE=4287090426,LIGHT_STEEL_BLUE=4289774814,LIGHT_BLUE=4289583334,POWDER_BLUE=4289781990,INDIGO=4283105410,PURPLE=4286578816,DARK_MAGENTA=4287299723,DARK_VIOLET=4287889619,DARK_SLATE_BLUE=4282924427,BLUE_VIOLET=4287245282,DARK_ORCHID=4288230092,FUCHSIA=4294902015,MAGENTA=4294902015,SLATE_BLUE=4285160141,MEDIUM_SLATE_BLUE=4286277870,MEDIUM_ORCHID=4290401747,MEDIUM_PURPLE=4287852763,ORCHID=4292505814,VIOLET=4293821166,PLUM=4292714717,THISTLE=4292394968,LAVENDER=4293322490,REBECCA_PURPLE=4284887961,MISTY_ROSE=4294960353,ANTIQUE_WHITE=4294634455,LINEN=4294635750,BEIGE=4294309340,WHITE_SMOKE=4294309365,LAVENDER_BLUSH=4294963445,OLD_LACE=4294833638,ALICE_BLUE=4293982463,SEASHELL=4294964718,GHOST_WHITE=4294506751,HONEYDEW=4293984240,FLORAL_WHITE=4294966e3,AZURE=4293984255,MINT_CREAM=4294311930,SNOW=4294966010,IVORY=4294967280,WHITE=4294967295,BLACK=4278190080,DARK_SLATE_GRAY=DARK_SLATE_GREY=4281290575,DIM_GRAY=DIM_GREY=4285098345,SLATE_GRAY=SLATE_GREY=4285563024,GREY=4286611584,LIGHT_SLATE_GRAY=LIGHT_SLATE_GREY=4286023833,DARK_GRAY=DARK_GREY=4289309097,SILVER=4290822336,LIGHT_GRAY=LIGHT_GREY=4292072403,GAINSBORO=4292664540,_createColor=(e,t=getColorMode(),r=t)=>{const a=r==(t==p.RGB?p.HSB:p.RGB);let o=getAlphaRange();return r!=t&&(o=t==p.RGB?RGB_COLOR_RANGE[3]:HSB_COLOR_RANGE[3]),e=_parseColorArray(e,o),a&&(p.pushStyle(),presetColorMode(t)),result=p.color.apply(null,e),a&&p.popStyle(),result},_appendFilter=e=>{if("none"==ctx.filter)return ctx.filter=e;ctx.filter+=e},_parseColorArray=(e,t=getAlphaRange(),r=!1)=>{switch(_.isNumber(e)&&(e=[e]),e.length){case 1:e=[e[0],e[0],e[0],r?e[0]:t];break;case 2:e=[e[0],e[0],e[0],e[1]];break;case 3:e.push(t)}return e},clearEffects=()=>ctx.filter="none",getAlphaRange=()=>p.alpha(WHITE),getBlueRange=()=>p.blue(WHITE),getBrightnessRange=()=>getBlueRange(),getGreenRange=()=>p.green(WHITE),getHueRange=()=>getRedRange(),getRedRange=()=>p.red(WHITE),getSaturationRange=()=>getGreenRange(),getShadow=()=>hexToRGB(ctx.shadowColor),getShadowBlur=()=>ctx.shadowBlur,isDefaultColorRange=()=>getColorRange()==RGB_COLOR_RANGE,noShadow=()=>shadow(TRANSPARENT),getShadowOffset=()=>[ctx.shadowOffsetX,ctx.shadowOffsetY],angularGradient=(e,t,a,o,s,l,R=0,n=5)=>{R-=90;const E=Math.ceil(10*p.degrees(Math.atan(n/Math.max(a,o))))/10;if(p.pushStyle(),1==n){p.strokeWeight(1.5);for(let n=R;n<R+359;n+=E)p.stroke(p.lerpColor(s,l,(n-R)/360)),r=p.radians(n),p.line(e+a/2,t+o/2,p.map(Math.cos(r),-1,1,e,e+a),p.map(Math.sin(r),-1,1,t,t+o))}else{p.strokeWeight(1);for(let r=R;r<R+359;r+=E){const n=p.lerpColor(s,l,(r-R)/360);p.stroke(n),p.fill(n),r1=p.radians(r),r2=p.radians(r-E),p.triangle(e+a/2,t+o/2,p.map(Math.cos(r1),-1,1,e,e+a),p.map(Math.sin(r1),-1,1,t,t+o),p.map(Math.cos(r2),-1,1,e,e+a),p.map(Math.sin(r2),-1,1,t,t+o))}}p.popStyle()},circularGradient=(e,t,a,o,s,l,R=0,n=5)=>{const E=Math.ceil(10*p.degrees(Math.atan(n/Math.max(a,o))))/10;if(p.pushStyle(),1==n){p.strokeWeight(1.5);for(let n=R-1;n<R+180;n+=E)p.stroke(p.lerpColor(s,l,Math.abs((n-R)/180))),r=p.radians(n),p.line(e+a/2,t+o/2,p.map(Math.cos(r),-1,1,e,e+a),p.map(Math.sin(r),-1,1,t,t+o));for(let n=R-1;n>R-180;n-=E)p.stroke(p.lerpColor(s,l,Math.abs((n-R)/180))),r=p.radians(n),p.line(e+a/2,t+o/2,p.map(Math.cos(r),-1,1,e,e+a),p.map(Math.sin(r),-1,1,t,t+o))}else{p.strokeWeight(1);for(let r=R-1;r<R+180;r+=E){const n=p.lerpColor(s,l,Math.abs((r-R)/180));p.stroke(n),p.fill(n),r1=p.radians(r),r2=p.radians(r-E),p.triangle(e+a/2,t+o/2,p.map(Math.cos(r1),-1,1,e,e+a),p.map(Math.sin(r1),-1,1,t,t+o),p.map(Math.cos(r2),-1,1,e,e+a),p.map(Math.sin(r2),-1,1,t,t+o))}r1=p.radians(R-180),r2=p.radians(R-180-E),p.stroke(l),p.fill(l),p.triangle(e+a/2,t+o/2,p.map(Math.cos(r1),-1,1,e,e+a),p.map(Math.sin(r1),-1,1,t,t+o),p.map(Math.cos(r2),-1,1,e,e+a),p.map(Math.sin(r2),-1,1,t,t+o));for(let r=R-1;r>R-180;r-=E){const n=p.lerpColor(s,l,Math.abs((r-R)/180));p.stroke(n),p.fill(n),r1=p.radians(r),r2=p.radians(r-E),p.triangle(e+a/2,t+o/2,p.map(Math.cos(r1),-1,1,e,e+a),p.map(Math.sin(r1),-1,1,t,t+o),p.map(Math.cos(r2),-1,1,e,e+a),p.map(Math.sin(r2),-1,1,t,t+o))}}p.popStyle()},p.blur=(e=5)=>{_.isNumber(e)&&(e=`${e}px`),_appendFilter(`blur(${e})`)},contrast=e=>_appendFilter(`contrast(${e}%)`),dropShadow=(e,t=e,r=5,a="#000")=>{_.isNumber(a)&&(a=RGBToHex(a)),_appendFilter(`drop-shadow(${e}px ${t}px ${r}px ${a})`)},effect=(e,...t)=>{switch(e){case p.BLUR:return p.blur(...t);case BRIGHTNESS:case LUMINANCE:return luminance(...t);case CONTRAST:return contrast(...t);case DROP_SHADOW:return dropShadow(...t);case p.GRAY:case GRAYSCALE:return grayscale(...t);case HUE_ROTATE:return hueRotate(...t);case p.INVERT:return invert(...t);case OPACITY:return opacity(...t);case SATURATE:return saturate(...t);case SEPIA:return sepia(...t)}_appendFilter(e)},fastBlur=(e=10,t=0,r=0,a=WIDTH,o=a||HEIGHT)=>{t<0&&(a+=t,t=0),r<0&&(o+=r,r=0),e=p.constrain(e,0,Math.min(a,o)),p.image(p.get(t,r,a,o),t,r,a/e,o/e),p.image(p.get(t,r,a/e,o/e),t,r,a,o)},getColorMode=()=>-65536==p.color(getRedRange(),0,0)?p.RGB:p.HSB,getColorRange=()=>[p.red,p.green,p.blue,p.alpha].map((e=>e.call(null,WHITE))),getFill=(e=!0)=>(e&&p.rect(0,0,"%"),hexToRGB(ctx.fillStyle)),getStroke=(e=!0)=>(e&&p.rect(0,0,"%"),hexToRGB(ctx.strokeStyle)),grayscale=(e=100)=>_appendFilter(`grayscale(${e}%)`),hexToHSB=(e,t=!0)=>t?hexToRGB(e):RGBToHSB.apply(p,hexToRGB(e,!1)),hexToRGB=(e,t=!0)=>{const r=getColorMode();switch((e=e.replace("#","")).length){case 3:case 6:e=e.replace(/^([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,r,a)=>t+t+r+r+a+a));break;case 4:case 8:e=e.replace(/^([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,r,a,o)=>t+t+r+r+a+a+o+o))}let a=e.match(/.{2}/g).map((e=>parseInt(e,16)));3==a.length&&a.push(RGB_COLOR_RANGE[3]),isDefaultColorRange()||r!=p.RGB||(a=mapColorRange(a));let o=a;return t&&(o=_createColor(a,p.RGB,r)),o},HSBToHex=(...e)=>{let t=!0,r=!0;_.every(_.last(e,2),_.isBoolean)?(r=e.pop(),t=e.pop()):_.isBoolean(_.last(e))&&(t=e.pop());const a=!isDefaultColorRange();a&&p.pushStyle(),presetColorMode(p.RGB);const o=HSBToRGB(...e).map((e=>Math.round(e)));return a&&p.popStyle(),RGBToHex(...o,t,r)},HSBToRGB=(...e)=>{const t=getColorRange(),r=getColorMode()==p.RGB?t:RGB_COLOR_RANGE;let a,o,s,l;switch(e.length){case 1:{const t=!isDefaultColorRange();t&&(p.pushStyle(),presetColorMode(p.HSB)),[a,o,s,l]=toHSB(e[0]),t&&p.popStyle(),a/=60,o/=100,s/=100,l/=100;break}case 3:case 4:4==e.length&&(l=e.pop()/HSB_COLOR_RANGE[3]),a=e.shift()/60,[o,s]=e.map(((e,t)=>e/HSB_COLOR_RANGE[t+1]))}f=(e,t=(e+a)%6)=>s-s*o*Math.max(Math.min(t,4-t,1),0);let R=[f(5),f(3),f(1),l||1];return R=R.map(((e,t)=>e*r[t])),R},hueRotate=e=>_appendFilter(`hue-rotate(${e}${"degrees"==p.angleMode?"deg":"rad"})`),invert=(e=100)=>_appendFilter(`invert(${e}%)`),linearGradient=e=>{let{x:t,y:r,width:a,height:o,stops:s,angle:l,x0:R,y0:n,x1:E,y1:i}=e;if(o=o||a,_.isNumber(l)){"degrees"==p.angleMode&&(l=p.radians(l));const e=_pointOnRect(a,o,l);R=R||t+a-e.x,n=n||r+o-e.y,E=E||t+e.x,i=i||r+e.y}push();const c=ctx.createLinearGradient(R,n,E,i);_.every(s,_.isArray)||(s=s.map(((e,t,r)=>[p.norm(t,0,r.length-1),e])));for(const e of s)_.isNumber(e[1])&&(e[1]=RGBToHex(e[1],!1)),c.addColorStop(...e);ctx.fillStyle=c,ctx.fillRect(t,r,a,o),pop()},luminance=e=>_appendFilter(`brightness(${e}%)`),opacity=e=>_appendFilter(`opacity(${e}%)`),presetColorMode=e=>{switch(e||(e=getColorMode()==p.RGB?p.HSB:p.RGB),e){case p.RGB:p.colorMode(p.RGB,255);break;case p.HSB:p.colorMode(p.HSB,360,100,100,100)}},mapColorRange=(e,t)=>{const r=getColorRange();return t?(t=_parseColorArray(t,r[3],!0),e=_parseColorArray(e,r[3]).map(((e,a)=>p.map(e,0,r[a],0,t[a])))):e=_parseColorArray(e,255).map(((e,t)=>p.map(e,0,255,0,r[t]))),e},radialGradient=e=>{let{x:t,y:r,width:a,height:o,stops:s,x0:l,y0:R,r0:n,x1:E,y1:i,r1:c}=e;o=o||a;const h=t+a/2,A=r+o/2;_.isNumber(l)||(l=h),_.isNumber(R)||(R=A),n=n||0,_.isNumber(E)||(E=h),_.isNumber(i)||(i=A),c=c||a/2,push();const G=ctx.createRadialGradient(l,R,n,E,i,c);_.every(s,_.isArray)||(s=s.map(((e,t,r)=>[p.norm(t,0,r.length-1),e])));for(const e of s)_.isNumber(e[1])&&(e[1]=RGBToHex(e[1],!1)),G.addColorStop(...e);ctx.fillStyle=G,ctx.fillRect(t,r,a,o),pop()},RGBToHex=(...e)=>{let t,r=!0,a=!0;switch(_.every(_.last(e,2),_.isBoolean)?(a=e.pop(),r=e.pop()):_.isBoolean(_.last(e))&&(r=e.pop()),e.length){case 1:{const r=p.alpha(e[0]);t=p.hex(e[0],6)+(r!=RGB_COLOR_RANGE[3]?r.toString(16).padStart(2,"0"):"");break}case 3:case 4:t=((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1),4==e.length&&e[3]!=RGB_COLOR_RANGE[3]&&(t+=e[3].toString(16).padStart(2,"0"))}return r&&(8==t.length&&(t=t.replace(/(\w)\1(\w)\2(\w)\3(\w)\4/,"$1$2$3$4")),6==t.length&&(t=t.replace(/(\w)\1(\w)\2(\w)\3/,"$1$2$3"))),(a?"#":"")+t.toUpperCase()},RGBToHSB=(...e)=>{const t=getColorRange(),r=getColorMode()==p.HSB?t:HSB_COLOR_RANGE,a=[e=>p.map(e,0,6,0,r[0]),e=>e*r[1],e=>e*r[2],e=>e*r[3]];let o,s,l,R;switch(e.length){case 1:{const t=!isDefaultColorRange();t&&(p.pushStyle(),presetColorMode(p.RGB)),[o,s,l,R]=toRGB(e[0]).map(((e,t)=>e/RGB_COLOR_RANGE[t])),t&&p.popStyle();break}case 3:case 4:4==e.length&&(R=e.pop()/RGB_COLOR_RANGE[3]),[o,s,l]=e.map(((e,t)=>e/RGB_COLOR_RANGE[t]))}const n=Math.max(o,s,l),E=n-Math.min(o,s,l),_=E&&(n==o?(s-l)/E:n==s?2+(l-o)/E:4+(o-s)/E);let i=[_<0?_+6:_,n&&E/n,n,R||1];return i=i.map(((e,t)=>a[t](e))),i},saturate=e=>_appendFilter(`saturate(${e}%)`),sepia=(e=100)=>_appendFilter(`sepia(${e}%)`),shadow=(...e)=>{let t=e[0];e.length>1&&(t=p.color.apply(null,e)),_.isNumber(e[0])&&(t=RGBToHex(t,!1)),ctx.shadowColor=t},shadowBlur=e=>ctx.shadowBlur=e,shadowOffset=(e,t=e)=>{_.isNumber(e)&&(ctx.shadowOffsetX=e),ctx.shadowOffsetY=t},toHSB=(...e)=>{switch(e.length){case 1:{const t=e[0];if(_.isNumber(t)){const e=getColorMode()==p.RGB;e&&(p.pushStyle(),presetColorMode(p.HSB));const r=[p.hue(t),p.saturation(t),p.brightness(t),p.alpha(t)];return e&&p.popStyle(),r}return hexToHSB(t)}case 3:case 4:return RGBToHSB.apply(p,e)}},toRGB=(...e)=>{switch(e.length){case 1:{const t=e[0];if(_.isNumber(t)){const e=getColorMode()==p.HSB;e&&(p.pushStyle(),presetColorMode(p.RGB));const r=[p.red(t),p.green(t),p.blue(t),p.alpha(t)];return e&&p.popStyle(),r}return hexToRGB(t)}case 3:case 4:return HSBToRGB.apply(p,e)}},linearGradientOld=(t,r,a,o,p,s,l=RIGHT,R=5)=>{switch(push(),e.strokeWeight(1),l){case LEFT:case RIGHT:if(l==LEFT&&([p,s]=[s,p]),1==R)for(let l=0;l<a;l++)e.stroke(e.lerpColor(p,s,l/a)),e.line(t+l,r,t+l,r+o);else for(let l=0;l<a;l+=R){const n=e.lerpColor(p,s,l/a);e.stroke(n),e.fill(n),l+R>a?e.rect(t+l,r,a-l,o):e.rect(t+l,r,R,o)}break;case TOP:case UP:case BOTTOM:case DOWN:if(l!=TOP&&l!=UP||([p,s]=[s,p]),1==R)for(let l=0;l<o;l++)e.stroke(e.lerpColor(p,s,l/o)),e.line(t,r+l,t+a,r+l);else for(let l=0;l<o;l+=R){const n=e.lerpColor(p,s,l/o);e.stroke(n),e.fill(n),l+R>a?e.rect(t,r+l,a,o-l):e.rect(t,r+l,a,R)}break;case TOP_LEFT:case BOTTOM_RIGHT:if(l==TOP_LEFT&&([p,s]=[s,p]),1==R){for(let l=0;l<a;l++)e.stroke(e.lerpColor(p,s,l/a/2)),e.line(t+l,r,t,r+e.map(l,0,a,0,o));for(let l=0;l<a;l++)e.stroke(e.lerpColor(p,s,l/a/2+.5)),e.line(t+l,r+o,t+a,r+e.map(l,0,a,0,o))}else{const e=Math.max(a,o)*Math.sqrt(2);showGraphics(t,r,a,o,(function(){this.angleMode="degrees",this.rotate(-45);for(let t=0;t<e;t+=R){const r=this.lerpColor(p,s,t/e);this.stroke(r),this.fill(r),t+R>e?this.rect(-e/2,t,e,e-t):this.rect(-e/2,t,e,R)}}))}break;case TOP_RIGHT:case BOTTOM_LEFT:if(l==TOP_RIGHT&&([p,s]=[s,p]),1==R){for(let l=0;l<a;l++)e.stroke(e.lerpColor(p,s,l/a/2)),e.line(t+a-l,r,t+a,r+e.map(l,0,a,0,o));for(let l=0;l<a;l++)e.stroke(e.lerpColor(p,s,l/a/2+.5)),e.line(t+a-l,r+o,t,r+e.map(l,0,a,0,o))}else{const e=Math.max(a,o)*Math.sqrt(2);showGraphics(t,r,a,o,(function(){this.angleMode="degrees",this.rotate(45);for(let t=0;t<e;t+=R){const r=this.lerpColor(p,s,t/e);this.stroke(r),this.fill(r),t+R>e?this.rect(0,t-e/2,e,e-t):this.rect(0,t-e/2,e,R)}}))}}pop()},radialGradientOld=(t,r,a,o,p,s,l=5)=>{push(),e.strokeWeight(1);const R=Math.max(a,o);if(1==l){e.noFill();for(let l=0;l<R;l++)e.stroke(e.lerpColor(s,p,l/R)),e.arc(t,r,a-e.map(l,0,R,0,a),o-e.map(l,0,R,0,o),0,360)}else for(let n=0;n<R;n+=l){const l=e.lerpColor(s,p,n/R);e.stroke(l),e.fill(l),e.ellipse(t,r,a-e.map(n,0,R,0,a),o-e.map(n,0,R,0,o))}pop()};