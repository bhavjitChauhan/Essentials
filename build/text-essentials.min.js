_text_initialized_="undefined"!=typeof TEXT_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Text Essentials depends on the Essentials Core."):"undefined"==typeof COLOR_ESSENTIALS?console.error("Text Essentials depends on Color Essentials."):(TEXT_ESSENTIALS=!0,_silent_||_text_initialized_||console.info("%cText Essentials",_console_style_)),fastGradientText=(t,n=0,o=e.textAscent(),s,r)=>{if(push(),t.includes("\n")){const e=t.split("\n");for(const t in e)fastGradientText(e[t],n,o+t*textAscent(),s,r)}else for(let i=0;i<t.length;i++)e.fill(e.lerpColor(s,r,i/t.length)),e.text(t[i],n+e.textWidth(t.slice(0,i)),o);pop()},font=function(t){let n=Array.from(arguments).slice(1);n.push("");let o,s=n.find((function(e){return _.isBoolean(e)}));s=!_.isBoolean(s)&&!0,n=_.without(n,!0,!1);let r=n.find((function(e){return!isNaN(e)}));if(isFont(t)){o=t,r=r||+o.css.match(/\d+/)[0],previousCSS=o.css.split(" "),previousProperties=previousCSS.slice(0,-2).filter((function(e){return"normal"!==e})),n=_.union(n,previousProperties);let e=n.filter((function(e){return!!_.isString(e)&&"-"==e.charAt(0)}));e=e.map((function(e){return e.substr(1)})),n=n.filter((function(e){return!!_.isString(e)&&"-"!=e.charAt(0)})),n=_.difference(n,e).join(" "),o.css=`${n} ${r}px/${r+2}px ${_.last(previousCSS)}`}else r=r||12,o=e.createFont(t,r),n=_.without(n,r),o.css=(!_.isEmpty(n)&&n.join(" ")+" ")+`${r}px/${r+2}px ${t}`;return s&&e.textFont(o),o},format=t=>{let n=_.first(t.match(/\${.*?}/));for(;n;){let o;try{o=_eval(`\`${n}\``)}catch(t){let s=n.match(/(\w+)\(/);if(_.isArray(s)){s=s[1];let t=n.match(/\(([^)]+)\)/);_.isArray(t)?(t=t[1].split(","),o=e[s](...t)):o=e[s]()}else{const t=n.match(/\w+/);o=e[t]}}t=t.replace(n,o),n=_.first(t.match(/\${.*?}/))}return t},formatDuration=e=>{e<0&&(e=-e);const t={day:Math.floor(e/864e5),hour:Math.floor(e/36e5)%24,minute:Math.floor(e/6e4)%60,second:Math.floor(e/1e3)%60,millisecond:Math.floor(e)%1e3};return Object.entries(t).filter((e=>0!==e[1])).map((([e,t])=>`${t} ${e}${1!==t?"s":""}`)).join(", ")},highlightText=(t,n=0,o=e.textAscent(),s=YELLOW)=>{if(/\S/.test(t)){t=t.split("\n"),e.noStroke(),e.rectMode(e.CORNER),e.textAlign(e.LEFT,e.TOP);for(const r in t)t[r]=` ${t[r]} `,push(),e.fill(s),e.rect(n,o+r*e.textAscent()*2,e.textWidth(t[r]),1.75*e.textAscent()),pop(),e.text(t[r],n,o+r*e.textAscent()*2)}},lightOrDarkText=t=>{let n,o,s;if("string"==typeof t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);n=parseInt(e[1],16),o=parseInt(e[2],16),s=parseInt(e[3],16)}else n=e.red(t),o=e.green(t),s=e.blue(t);return(n+s+o)/3<225?WHITE:BLACK},multicoloredText=(t,n=0,o=e.textAscent())=>{if(/\S/.test(t)){t=t.split("\n"),push(),e.textAlign(e.LEFT,e.CORNER);for(const s in t){t[s]=t[s].split(/\[|]/);let r=0;for(const i in t[s])if(/\d+,\d+,\d+/.test(t[s][i])){const n=t[s][i].split(",");e.fill.apply(e,n),delete t[s][i],0===r&&(t[s][i-1]+=" "),r+=1}else{const l=e.textWidth(t[s].slice(0,i));e.text(t[s][i],n+l-2*r*e.textWidth(" "),o+s*e.textAscent()*2)}}pop()}},obfuscate=e=>{let t="";for(const n in _.range(e.length)){let o=e.charCodeAt(n).toString(16);if(o.length<=2){for(;o.length<2;)o="0"+o;t+="\\x"+o}else{for(;o.length<4;)o="0"+o;t+="\\u"+o}}return t},ordinalSuffix=e=>{const t=parseInt(e,10),n=[t%10,t%100],o=["st","nd","rd","th"];return[1,2,3,4].includes(n[0])&&![11,12,13,14,15,16,17,18,19].includes(n[1])?t+o[n[0]-1]:t+o[3]},outlineText=(t,n=0,o=e.textAscent(),s=BLACK)=>{if(/\S/.test(t)){push(),e.fill(s);for(let s=-2;s<3;s++){for(let r=-1;r<3;r++)e.text(t,n+s,o+r);e.text(t,n+s,o),e.text(t,n,o+s)}pop(),e.text(t,n,o)}},pluralize=(e,t,n=t+"s")=>{const o=(e,t,n=t+"s")=>[1,-1].includes(Number(e))?t:n;return"object"==typeof e?(t,n)=>o(t,n,e[n]):o(e,t,n)},removeNonASCII=e=>e.replace(/[^\x20-\x7E]/g,""),String.prototype.format=function(){return format(this)},String.prototype.obfuscate=function(){return obfuscate(this)},String.prototype.removeNonASCII=function(){return removeNonASCII(this)},String.prototype.toTitleCase=function(){return toTitleCase(this)},String.prototype.toCamelCase=function(){return toCamelCase(this)},String.prototype.toKebabCase=function(){return toKebabCase(this)},String.prototype.toSnakeCase=function(){return toSnakeCase(this)},toCamelCase=e=>{const t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");return t.slice(0,1).toLowerCase()+t.slice(1)},toKebabCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("-"),toSnakeCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_"),toTitleCase=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),underlineText=(t,n=0,o=e.textAscent(),s=BLACK,r=e.externals.context.font.match(/\d+/)[0]/12)=>{if(/\S/.test(t)){strings=t.split("\n"),push(),e.strokeCap(e.SQUARE),e.strokeWeight(r),e.stroke(s);for(const t in strings)e.line(n,o+e.textAscent()/4+e.textAscent()*t*1.55,n+e.textWidth(strings[t]),o+e.textAscent()/4+e.textAscent()*t*1.55);e.textAlign(e.LEFT,e.CORNER),e.text(t,n,o),pop()}},wordWrap=(e,t,n="\n")=>e.replace(new RegExp(`(?![^\\n]{1,${t}}$)([^\\n]{1,${t}})\\s`,"g"),"$1"+n);