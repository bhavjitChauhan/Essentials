_text_initialized_="undefined"!=typeof TEXT_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Text Essentials depends on the Essentials Core."):(TEXT_ESSENTIALS=!0,_silent_||_text_initialized_||console.info("%cText Essentials",_console_style_)),f=t=>format(t),getTextSize=()=>ctx.font.match(/\d+/),fastGradientText=(t,e,n,o,r)=>{if(p.pushStyle(),t.includes("\n")){const i=t.split("\n");for(const t in i)fastGradientText(i[t],e,n+t*textAscent(),o,r)}else for(let i=0;i<t.length;i++)p.fill(p.lerpColor(o,r,i/t.length)),p.text(t[i],e+p.textWidth(t.slice(0,i)),n);p.popStyle()},font=function(t){let e=Array.from(arguments).slice(1);e.push("");let n,o=e.find((function(t){return _.isBoolean(t)}));o=!_.isBoolean(o)&&!0,e=_.without(e,!0,!1);let r=e.find((function(t){return!isNaN(t)}));if(isFont(t)){n=t,r=r||+n.css.match(/\d+/)[0],previousCSS=n.css.split(" "),previousProperties=previousCSS.slice(0,-2).filter((function(t){return"normal"!==t})),e=_.union(e,previousProperties);let o=e.filter((function(t){return!!_.isString(t)&&"-"==t.charAt(0)}));o=o.map((function(t){return t.substr(1)})),e=e.filter((function(t){return!!_.isString(t)&&"-"!=t.charAt(0)})),e=_.difference(e,o).join(" "),n.css=`${e} ${r}px/${r+2}px ${_.last(previousCSS)}`}else r=r||12,n=p.createFont(t,r),e=_.without(e,r),n.css=(!_.isEmpty(e)&&e.join(" ")+" ")+`${r}px/${r+2}px ${t}`;return o&&p.textFont(n),n},format=t=>evalPJS(`\`${t}\``),formatDuration=(t,e,n=!1)=>{if(!t)return"0";if(t<0&&(t=-t),e&&(t=roundTo(t,e)),t<.001)return"0";const o={year:Math.floor(t/31536e6),month:Math.floor(t/2592e6),day:Math.floor(t/864e5),hour:Math.floor(t/36e5)%24,minute:Math.floor(t/6e4)%60,second:Math.floor(t/1e3)%60,millisecond:Math.floor(t)%1e3,microsecond:Math.floor(1e3*t)%1e3};return n?Object.values(o):Object.entries(o).filter((t=>0!==t[1])).map((([t,e])=>`${e} ${pluralize(e,t)}`)).join(", ")},formatNumber=(t,e="en",n={})=>t.toLocaleString(e,n),highlightText=(t,e,n,o=YELLOW)=>{if(/\S/.test(t)){t=t.split("\n"),p.pushStyle(),p.noStroke(),p.rectMode(p.CORNER),p.textAlign(p.LEFT,p.TOP);for(const r in t)t[r]=` ${t[r]} `,p.pushStyle(),p.fill(o),p.rect(e,n+r*p.textAscent()*2,p.textWidth(t[r]),1.75*p.textAscent()),p.popStyle(),p.text(t[r],e,n+r*p.textAscent()*2);p.popStyle()}},lightOrDarkText=t=>{let e,n,o;if("string"==typeof t){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);e=parseInt(r[1],16),n=parseInt(r[2],16),o=parseInt(r[3],16)}else e=p.red(t),n=p.green(t),o=p.blue(t);return(e+o+n)/3<225?WHITE:BLACK},multicoloredText=(t,e,n)=>{if(/\S/.test(t)){t=t.split("\n"),p.pushStyle(),p.textAlign(p.LEFT,p.CORNER);for(const o in t){t[o]=t[o].split(/\[|]/);let r=0;for(const i in t[o])if(/\d+,\d+,\d+/.test(t[o][i])){const e=t[o][i].split(",");p.fill.apply(p,e),delete t[o][i],0===r&&(t[o][i-1]+=" "),r+=1}else{const s=p.textWidth(t[o].slice(0,i));p.text(t[o][i],e+s-2*r*p.textWidth(" "),n+o*p.textAscent()*2)}}p.popStyle()}},obfuscate=t=>{let e="";for(const n in _.range(t.length)){let o=t.charCodeAt(n).toString(16);if(o.length<=2){for(;o.length<2;)o="0"+o;e+="\\x"+o}else{for(;o.length<4;)o="0"+o;e+="\\u"+o}}return e},ordinalSuffix=t=>{const e=parseInt(t,10),n=[e%10,e%100],o=["st","nd","rd","th"];return[1,2,3,4].includes(n[0])&&![11,12,13,14,15,16,17,18,19].includes(n[1])?e+o[n[0]-1]:e+o[3]},outlineText=(t,e,n,o=5,r=BLACK)=>{t=t.replace("\n",""),ctx.save(),ctx.lineJoin="round",ctx.lineWidth=o,_.isNumber(r)&&(r="undefined"!=typeof COLOR_ESSENTIALS?RGBToHex(r,!1):"#"+hex(r,6)),ctx.strokeStyle=r,ctx.strokeText(t,e,n),ctx.restore(),pushStyle(),p.textAlign(p.LEFT,p.TOP),p.text(t,e,n),popStyle()},pluralize=(t,e,n=e+"s")=>{const o=(t,e,n=e+"s")=>[1,-1].includes(Number(t))?e:n;return"object"==typeof t?(e,n)=>o(e,n,t[n]):o(t,e,n)},removeNonASCII=t=>t.replace(/[^\x20-\x7E]/g,""),String.prototype.format=function(){return format(this)},String.prototype.obfuscate=function(){return obfuscate(this)},String.prototype.removeNonASCII=function(){return removeNonASCII(this)},String.prototype.toTitleCase=function(){return toTitleCase(this)},String.prototype.toCamelCase=function(){return toCamelCase(this)},String.prototype.toKebabCase=function(){return toKebabCase(this)},String.prototype.toSnakeCase=function(){return toSnakeCase(this)},toCamelCase=t=>{const e=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((t=>t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase())).join("");return e.slice(0,1).toLowerCase()+e.slice(1)},toKebabCase=t=>t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((t=>t.toLowerCase())).join("-"),toSnakeCase=t=>t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((t=>t.toLowerCase())).join("_"),toTitleCase=t=>t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "),underlineText=(t,e,n,o=BLACK,r=p.externals.context.font.match(/\d+/)[0]/12)=>{if(/\S/.test(t)){strings=t.split("\n"),p.pushStyle(),p.strokeCap(p.SQUARE),p.strokeWeight(r),p.stroke(o);for(const t in strings)p.line(e,n+p.textAscent()/4+p.textAscent()*t*1.55,e+p.textWidth(strings[t]),n+p.textAscent()/4+p.textAscent()*t*1.55);p.textAlign(p.LEFT,p.CORNER),p.text(t,e,n),p.popStyle()}},wordWrap=(t,e,n="\n")=>t.replace(new RegExp(`(?![^\\n]{1,${e}}$)([^\\n]{1,${e}})\\s`,"g"),"$1"+n),outlineTextOld=(t,n=0,o=e.textAscent(),r=BLACK)=>{if(/\S/.test(t)){push(),e.fill(r);for(let r=-2;r<3;r++){for(let i=-1;i<3;i++)e.text(t,n+r,o+i);e.text(t,n+r,o),e.text(t,n,o+r)}pop(),e.text(t,n,o)}};