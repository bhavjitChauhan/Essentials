_text_initialized_="undefined"!=typeof TEXT_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("Text Essentials depends on the Essentials Core."):"undefined"==typeof COLOR_ESSENTIALS?console.error("Text Essentials depends on Color Essentials."):(TEXT_ESSENTIALS=!0,_silent_||_text_initialized_||console.info("%cText Essentials",_console_style_)),fastGradientText=(t,n=0,s=e.textAscent(),o,i)=>{if(push(),t.includes("\n")){const e=t.split("\n");for(const t in e)fastGradientText(e[t],n,s+t*textAscent(),o,i)}else for(let r=0;r<t.length;r++)e.fill(e.lerpColor(o,i,r/t.length)),e.text(t[r],n+e.textWidth(t.slice(0,r)),s);pop()},font=function(t){let n=Array.from(arguments).slice(1);n.push("");let s,o=n.find((function(e){return _.isBoolean(e)}));o=!_.isBoolean(o)&&!0,n=_.without(n,!0,!1);let i=n.find((function(e){return!isNaN(e)}));if(isFont(t)){s=t,i=i||+s.css.match(/\d+/)[0],previousCSS=s.css.split(" "),previousProperties=previousCSS.slice(0,-2).filter((function(e){return"normal"!==e})),n=_.union(n,previousProperties);let e=n.filter((function(e){return!!_.isString(e)&&"-"==e.charAt(0)}));e=e.map((function(e){return e.substr(1)})),n=n.filter((function(e){return!!_.isString(e)&&"-"!=e.charAt(0)})),n=_.difference(n,e).join(" "),s.css=`${n} ${i}px/${i+2}px ${_.last(previousCSS)}`}else i=i||12,s=e.createFont(t,i),n=_.without(n,i),s.css=(!_.isEmpty(n)&&n.join(" ")+" ")+`${i}px/${i+2}px ${t}`;return o&&e.textFont(s),s},formatDuration=e=>{e<0&&(e=-e);const t={day:Math.floor(e/864e5),hour:Math.floor(e/36e5)%24,minute:Math.floor(e/6e4)%60,second:Math.floor(e/1e3)%60,millisecond:Math.floor(e)%1e3};return Object.entries(t).filter((e=>0!==e[1])).map((([e,t])=>`${t} ${e}${1!==t?"s":""}`)).join(", ")},highlightText=(t,n=0,s=e.textAscent(),o=YELLOW)=>{if(/\S/.test(t)){t=t.split("\n"),e.noStroke(),e.rectMode(e.CORNER),e.textAlign(e.LEFT,e.TOP);for(const i in t)t[i]=` ${t[i]} `,push(),e.fill(o),e.rect(n,s+i*e.textAscent()*2,e.textWidth(t[i]),1.75*e.textAscent()),pop(),e.text(t[i],n,s+i*e.textAscent()*2)}},lightOrDarkText=t=>{let n,s,o;if("string"==typeof t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);n=parseInt(e[1],16),s=parseInt(e[2],16),o=parseInt(e[3],16)}else n=e.red(t),s=e.green(t),o=e.blue(t);return(n+o+s)/3<225?WHITE:BLACK},multicoloredText=(t,n=0,s=e.textAscent())=>{if(/\S/.test(t)){t=t.split("\n"),push(),e.textAlign(e.LEFT,e.CORNER);for(const o in t){t[o]=t[o].split(/\[|]/);let i=0;for(const r in t[o])if(/\d+,\d+,\d+/.test(t[o][r])){const n=t[o][r].split(",");e.fill.apply(e,n),delete t[o][r],0===i&&(t[o][r-1]+=" "),i+=1}else{const l=e.textWidth(t[o].slice(0,r));e.text(t[o][r],n+l-2*i*e.textWidth(" "),s+o*e.textAscent()*2)}}pop()}},ordinalSuffix=e=>{const t=parseInt(e,10),n=[t%10,t%100],s=["st","nd","rd","th"];return[1,2,3,4].includes(n[0])&&![11,12,13,14,15,16,17,18,19].includes(n[1])?t+s[n[0]-1]:t+s[3]},outlineText=(t,n=0,s=e.textAscent(),o=BLACK)=>{if(/\S/.test(t)){push(),e.fill(o);for(let o=-2;o<3;o++){for(let i=-1;i<3;i++)e.text(t,n+o,s+i);e.text(t,n+o,s),e.text(t,n,s+o)}pop(),e.text(t,n,s)}},pluralize=(e,t,n=t+"s")=>{const s=(e,t,n=t+"s")=>[1,-1].includes(Number(e))?t:n;return"object"==typeof e?(t,n)=>s(t,n,e[n]):s(e,t,n)},String.prototype.format=function(){let t=this,n=_.first(t.match(/\${.*?}/));for(;n;){let s;try{s=_eval(`\`${n}\``)}catch(t){const o=n.match(/(\w+)\(/)[1],i=n.match(/\(([^)]+)\)/)[1].split(",");s=e[o](...i)}t=t.replace(n,s),n=_.first(t.match(/\${.*?}/))}return t},String.prototype.obfuscate=function(){let e="";for(const t in _.range(this.length)){let n=this.charCodeAt(t).toString(16);if(n.length<=2){for(;n.length<2;)n="0"+n;e+="\\x"+n}else{for(;n.length<4;)n="0"+n;e+="\\u"+n}}return e},String.prototype.removeNonASCII=function(){return this.replace(/[^\x20-\x7E]/g,"")},String.prototype.toCamelCase=function(){const e=this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");return e.slice(0,1).toLowerCase()+e.slice(1)},String.prototype.toKebabCase=function(){return this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("-")},String.prototype.toSnakeCase=function(){return this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_")},String.prototype.toTitleCase=function(){return this.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},underlineText=(t,n=0,s=e.textAscent(),o=BLACK,i=e.externals.context.font.match(/\d+/)[0]/12)=>{if(/\S/.test(t)){strings=t.split("\n"),push(),e.strokeCap(e.SQUARE),e.strokeWeight(i),e.stroke(o);for(const t in strings)e.line(n,s+e.textAscent()/4+e.textAscent()*t*1.55,n+e.textWidth(strings[t]),s+e.textAscent()/4+e.textAscent()*t*1.55);e.textAlign(e.LEFT,e.CORNER),e.text(t,n,s),pop()}},wordWrap=(e,t,n="\n")=>e.replace(new RegExp(`(?![^\\n]{1,${t}}$)([^\\n]{1,${t}})\\s`,"g"),"$1"+n);