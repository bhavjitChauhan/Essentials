/**
 * Essentials.
 *
 * The Essentials library provides utility functions for the Khan Academy
 * Processing Environment.
 *
 * @link https://github.com/bhavjitChauhan/Essentials
 * @file Minified CDN Essentials Build
 * @author Bhavjit Chauhan
 */

_environment_=this instanceof Window?"CDN":"KA",_console_style_="font-family:system-ui;font-size:0.75rem;",_core_initialized_="undefined"!=typeof ESSENTIALS_CORE,ESSENTIALS_CORE=!0,ESSENTIALS_VERSION="2.0.0",ESSENTIALS_ASCII="\n    _/_/_/_/    _/_/_/    _/_/_/  _/_/_/_/  _/      _/  _/_/_/_/_/  _/_/_/    _/_/    _/          _/_/_/\n   _/        _/        _/        _/        _/_/    _/      _/        _/    _/    _/  _/        _/\n  _/_/_/      _/_/      _/_/    _/_/_/    _/  _/  _/      _/        _/    _/_/_/_/  _/          _/_/\n _/              _/        _/  _/        _/    _/_/      _/        _/    _/    _/  _/              _/\n_/_/_/_/  _/_/_/    _/_/_/    _/_/_/_/  _/      _/      _/      _/_/_/  _/    _/  _/_/_/_/  _/_/_/\n\n",_silent_="undefined"!=typeof _silent_&&_silent_,_silent_||_core_initialized_||console.info(`%cESSENTIALS\n%cThe Khan Academy utility library.\n\n${_environment_} Build\nVersion ${ESSENTIALS_VERSION}\nCopyright Â© 2021 Bhavjit Chauhan\nhttps://github.com/bhavjitChauhan/Essentials`,"color:transparent;\nfont-size:3rem;\nbackground-image: url('https://github.com/bhavjitChauhan/Essentials/blob/master/logo.png?raw=true');\nbackground-position:center;\nbackground-repeat: no-repeat;\nbackground-size:contain;",_console_style_),_eval=eval,p=Processing.instances[0],[LEFT,RIGHT,TOP,BOTTOM,UP,DOWN]=[p.LEFT,p.RIGHT,p.TOP,p.BOTTOM,p.UP,p.DOWN],TOP_LEFT=1,TOP_RIGHT=2,BOTTOM_RIGHT=3,BOTTOM_LEFT=4,WIDTH=p.width,HEIGHT=p.height,HALF_WIDTH=WIDTH/2,HALF_HEIGHT=HEIGHT/2,ctx=p.externals.context,WHITE=4294967295,SILVER=4290822336,GREY=4286611584,BLACK=4278190080,RED=4294901760,MAROON=4286578688,ORANGE=4294944e3,YELLOW=4294967040,OLIVE=4286611456,LIME=4278255360,GREEN=4278222848,AQUA=4278255615,TEAL=4278222976,BLUE=4278190335,NAVY=4278190208,FUCHSIA=4294902015,PURPLE=4286578816,TRANSPARENT=16777215,_hash=(t,e=0)=>{const n=2654435761,_=2246822519,o=3266489917,r=668265263,a=374761393,i=t;let c=e+a&4294967295,s=0;if(i.length>=16){const o=[e+n+_&4294967295,e+_&4294967295,e+0&4294967295,e-n&4294967295],r=t,a=r.length-16;let i=0;for(s=0;(4294967280&s)<=a;s+=4){const t=s,e=(r[t+0]+(r[t+1]<<8))*_+((r[t+2]+(r[t+3]<<8))*_<<16);let a=o[i]+e&4294967295;a=a<<13|a>>>19;const c=65535&a,p=a>>>16;o[i]=c*n+(p*n<<16)&4294967295,i=i+1&3}c=(o[0]<<1|o[0]>>>31)+(o[1]<<7|o[1]>>>25)+(o[2]<<12|o[2]>>>20)+(o[3]<<18|o[3]>>>14)&4294967295}c=c+t.length&4294967295;const p=t.length-4;for(;s<=p;s+=4){const t=s;c=c+((i[t+0]+(i[t+1]<<8))*o+((i[t+2]+(i[t+3]<<8))*o<<16))&4294967295,c=c<<17|c>>>15,c=(65535&c)*r+((c>>>16)*r<<16)&4294967295}for(;s<i.length;++s){c+=i[s]*a,c=c<<11|c>>>21,c=(65535&c)*n+((c>>>16)*n<<16)&4294967295}return c^=c>>>15,c=((65535&c)*_&4294967295)+((c>>>16)*_<<16),c^=c>>>13,c=((65535&c)*o&4294967295)+((c>>>16)*o<<16),(c<0?c+4294967296:c).toString(16)},_pointOnRect=(t,e,n)=>{for(n=-n;n<-Math.PI;)n+=p.TAU;for(;n>Math.PI;)n-=p.TAU;const _=Math.atan2(e,t),o=Math.tan(n);let r;r=n>-_&&n<=_?1:n>_&&n<=Math.PI-_?2:n>Math.PI-_||n<=-(Math.PI-_)?3:4;const a={x:t/2,y:e/2};let i=1,c=1;switch(r){case 1:case 2:c=-1;break;case 3:case 4:i=-1}return 1==r||3==r?(a.x+=i*(t/2),a.y+=c*(t/2)*o):(a.x+=i*(e/(2*o)),a.y+=c*(e/2)),a},clearLogs=()=>p._clearLogs(),noop=function(){},showGraphics=()=>drawGraphics(),attempt=(t,...e)=>{try{return t(...e)}catch(t){return t instanceof Error?t:new Error(t)}},chainAsync=t=>{let e=0;const n=_.last(t),o=()=>{const _=t[e++];_===n?_():_(o)};o()},clean=t=>{const e=t.toString().replace(/__env__\.KAInfiniteLoopCount\+\+;/g,"").replace(/if \(__env__\.KAInfiniteLoopCount > 1000\) {[\s]+__env__\.KAInfiniteLoopProtect\('[^']*'\);[^}]+}/g,"").replace(/__env__\.PJSOutput\.applyInstance\((__env__\.\S+), '\S+'\)/g,"new $1");return Object.constructor(`return (function(__env__) {return ${e};});`)()(p)},complement=t=>(...e)=>!t(...e),evalPJS=t=>_eval(`with (p) ${t}`),drawGraphics=(t,e,n,_,o,r=p.P2D)=>{const a=p.createGraphics(n,_,r);o.call(a),p.image(a,t,e)},generateID=(t=8)=>{const e=t%2!=0,n=_eval(`new Uint8Array(Math.ceil(${t} / 2))`);crypto.getRandomValues(n);const _=Array.from(n,(t=>t.toString(16).padStart(2,"0"))).join("");return e?_.slice(0,-1):_},generateUUID=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(_eval("new Uint8Array(1)"))[0]&15>>t/4).toString(16))),getColonTime=function(){return(new Date).toTimeString().slice(0,8)},inherit=(t,e)=>{Object.setPrototypeOf(t.prototype,e.prototype),t.prototype.constructor=t,e.prototype.constructor===Object&&(e.prototype.constructor=e)},isEmptyFunction=t=>_.isFunction(t)&&/^function[^{]*[{]\s*[}]\s*$/.test(Function.prototype.toString.call(t)),isFont=t=>t instanceof p.PFont,isImage=t=>t instanceof p.PImage,isSound=t=>t.audio instanceof Audio,mostPerformant=(t,e=1e4,n=!1)=>{const _=t.map((t=>{const n=performance.now();for(let n=0;n<e;n++)t();return performance.now()-n}));return n?_:_.indexOf(Math.min(..._))},pop=()=>{p.popStyle(),ctx.restore()},printf=function(t,...e){t=t.toString();for(const n of e)t=t.replace(/(?<!\\)%/,n);t=t.replaceAll(/\\%/g,"%"),p.println(t)},randomInt=(t,e)=>_.random(t,e),push=()=>{p.pushStyle(),ctx.save()},restart=()=>{"undefined"!=typeof COLOR_ESSENTIALS&&(noShadow(),shadowBlur(0),shadowOffset(0,0)),"undefined"!=typeof SHAPE_ESSENTIALS&&(noStrokeDash(),strokeDashOffset(0)),"undefined"!=typeof EXTERNAL_ESSENTIALS&&(clearElements(),closeLog(),exitPointerLock(),forceAllowScroll()),p.colorMode(p.RGB,255),p.draw=noop,p.Program.restart()},roundTo=(t,e)=>e?Math.round(t/e)*e:t,timeTaken=(t,e="default")=>{console.time(`timeTaken#${e}`);const n=t();return console.timeEnd(`timeTaken#${e}`),n};