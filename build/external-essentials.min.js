_external_initialized_="undefined"!=typeof EXTERNAL_ESSENTIALS,"undefined"==typeof ESSENTIALS_CORE?console.error("External Essentials depends on the Essentials Core."):(EXTERNAL_ESSENTIALS=!0,_silent_||_external_initialized_||console.info("%cExternal Essentials",_console_style_)),_doc=_eval("document"),CREATE_ELEMENT="createElement",_preventDefault=e=>e.preventDefault(),CANVAS="#output-canvas",CANVAS_LOG="body div:first div:nth-child(2) div div",supportsTouchEvents=()=>"ontouchstart"in window,getSelectedText=()=>window.getSelection().toString(),preventScroll=()=>$(CANVAS).on("wheel",_preventDefault),allowScroll=()=>$(CANVAS).off("wheel",_preventDefault),forceAllowScroll=()=>$(CANVAS).off("wheel"),requestPointerLock=()=>$(CANVAS)[0].requestPointerLock(),exitPointerLock=()=>_doc.exitPointerLock(),resizeLog=e=>$("body > div:nth-child(1)").css("height",e),closeLog=()=>$("body > div:nth-child(1) > div:nth-child(3)").click(),detectDeviceType=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",clearElements=()=>$("#essentials").empty(),copyToClipboard=e=>{const t=_doc[CREATE_ELEMENT]("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",_doc.body.appendChild(t);const o=_doc.getSelection().rangeCount>0&&_doc.getSelection().getRangeAt(0);t.select(),_doc.execCommand("copy"),_doc.body.removeChild(t),o&&(_doc.getSelection().removeAllRanges(),_doc.getSelection().addRange(o))},detectLanguage=(e="en-US")=>navigator.language||Array.isArray(navigator.languages)&&navigator.languages[0]||e,allowBannedProperties=()=>{_.isEmpty(BabyHint.bannedProperties)||(console.warn("Restarting program to allow banned properties..."),BabyHint.bannedProperties={},restart())},disableLoopProtector=()=>{isEmptyFunction(LoopProtector.prototype.leave)||(console.warn("Restarting program to disable loop protector..."),LoopProtector.prototype.leave=noop,restart())},drawElement=(e,t={})=>{e instanceof jQuery||(t=e);let o=$("#essentials");if(!o.length){const e=$("<div>",{id:"essentials"});e.css({position:"absolute","pointer-events":"none"}),$(CANVAS).parent().prepend(e),o=$("#essentials")}const n={data:null,id:generateID(),x:0,y:0,width:"max-content",height:"max-content",interactive:!0},{data:r,id:a,x:s,y:i,width:l,height:c,interactive:d}=_.defaults(t,n);return e instanceof jQuery?(r&&e.append(r),(0!==s||0!==i)&&e.css("position","absolute"),!e.attr("id")&&e.attr("id",a),!e.css("left")&&e.css("left",s),!e.css("top")&&e.css("top",i),"0px"==e.css("width")&&e.css("width",l),"0px"==e.css("height")&&e.css("height",c),!e.css("pointer-events")&&e.css("pointer-events","auto")):((e=$("<div>",{html:r,id:a})).css({position:"absolute",left:s,top:i}),l&&e.css("width",l),c&&e.css("height",c),d&&e.css("pointer-events","auto")),Object.prototype.hasOwnProperty.call(t,"css")&&e.css(t.css),o.append(e),a},escapeHTML=e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e))),isBrowserTabFocused=()=>!_doc.hidden,isSessionStorageEnabled=()=>{try{const e=generateUUID();return window.sessionStorage.setItem(e,null),window.sessionStorage.removeItem(e),!0}catch(e){return!1}},prefersDarkColorScheme=()=>window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,isLocalStorageEnabled=()=>{try{const e=generateUUID();return window.localStorage.setItem(e,null),window.localStorage.removeItem(e),!0}catch(e){return!1}},prefersLightColorScheme=()=>window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,printMD=e=>{let t,o,n="";function r(e,t){n+=`<${t?"/":""}${e}>`}for(let a=0;a<e.length;a++)switch(e[a]){case"*":r("b",t),t=!t;break;case"_":r("i",o),o=!o;break;case"[":try{const t=e.substr(a,e.length),o=t.match(/(?<=\[).+?(?=\])/)[0],r=t.match(/(?<=\().+?(?=\))/)[0];n+=`<a href="${r}">${o}</a>`,a+=o.length+r.length+3;break}catch(e){console.warn(`Markdown error: ${e}`)}break;default:n+=e[a]}printHTML(n)},printHTML=t=>{t=t.replace(/<a href="([\w+:/.]+)">(?<=>)(.+?)(?=<)<\/a>/g,'<abbr title="Ctrl + Click"><a href="$1" target="_blank">$2</a></abbr>');const o=$(CANVAS_LOG).html();o||e.println(""),$(CANVAS_LOG).html((o&&o+"<br>"||"")+t)},unescapeHTML=e=>e.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,(e=>({"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[e]||e))),removeElement=e=>{$(`#${e}`).remove()};