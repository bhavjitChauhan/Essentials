_external_initialized_="undefined"!=typeof EXTERNAL_ESSENTIALS,_set_code_limit_="undefined"!=typeof _set_code_limit_?_set_code_limit_:25,"undefined"==typeof ESSENTIALS_CORE?console.error("External Essentials depends on the Essentials Core."):(EXTERNAL_ESSENTIALS=!0,_silent_||_external_initialized_||console.info("%cExternal Essentials",_console_style_)),CANVAS="#output-canvas",CANVAS_LOG="body div:first div:nth-child(2) div div",_preventDefault=e=>e.preventDefault(),allowScroll=()=>$(CANVAS).off("wheel",_preventDefault),closeLog=()=>$("body > div:nth-child(1) > div:nth-child(3)").click(),exitPointerLock=()=>document.exitPointerLock(),forceAllowScroll=()=>$(CANVAS).off("wheel"),getSelectedText=()=>window.getSelection().toString(),preventScroll=()=>$(CANVAS).on("wheel",_preventDefault),requestPointerLock=()=>$(CANVAS)[0].requestPointerLock(),resizeLog=e=>$("body > div:nth-child(1)").css("height",e),supportsTouchEvents=()=>"ontouchstart"in window,clearElements=()=>$("#essentials").empty(),copyToClipboard=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const o=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),o&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(o))},detectDeviceType=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",detectLanguage=(e="en-US")=>navigator.language||_.isArray(navigator.languages)&&navigator.languages[0]||e,allowBannedProperties=()=>{if(!_.isEmpty(BabyHint.bannedProperties))throw console.warn("Restarting program to allow banned properties..."),BabyHint.bannedProperties={},restart(),"Restarting program to allow banned properties..."},disableLoopProtector=()=>{if(!isEmptyFunction(LoopProtector.prototype.leave))throw console.warn("Restarting program to disable loop protector..."),LoopProtector.prototype.leave=noop,restart(),"Restarting program to disable loop protector..."},drawElement=(e,t={})=>{e instanceof jQuery||(t=e);let o=$("#essentials");if(!o.length){const e=$("<div>",{id:"essentials"});e.css({position:"absolute","pointer-events":"none"}),$(CANVAS).parent().prepend(e),o=$("#essentials")}const n={data:null,id:generateID(),x:0,y:0,width:"max-content",height:"max-content",interactive:!0},{data:r,id:s,x:a,y:i,width:l,height:c,interactive:d}=_.defaults(t,n);return e instanceof jQuery?(r&&e.append(r),(0!==a||0!==i)&&e.css("position","absolute"),!e.attr("id")&&e.attr("id",s),!e.css("left")&&e.css("left",a),!e.css("top")&&e.css("top",i),"0px"==e.css("width")&&e.css("width",l),"0px"==e.css("height")&&e.css("height",c),!e.css("pointer-events")&&e.css("pointer-events","auto")):((e=$("<div>",{html:r,id:s})).css({position:"absolute",left:a,top:i}),l&&e.css("width",l),c&&e.css("height",c),d&&e.css("pointer-events","auto")),Object.prototype.hasOwnProperty.call(t,"css")&&e.css(t.css),o.append(e),s},escapeHTML=e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e))),getLog=e=>{if(!Number.isInteger(e))return;const t=[getLogsText(e),getLogsTime(e)];return _.object(["text","time"],t)},getCode=function(){let e=arguments.callee;for(;!(e.arguments[0]instanceof Processing);)if(e=e.caller,e.arguments[0]instanceof MouseEvent||e.arguments[0]instanceof KeyboardEvent)return console.warn("`getCode` is not supported in Processing event functions.");return e.caller.arguments[0]},getLogs=()=>{const e=["text","time"],t=[];return _.zip(getLogsText(),getLogsTime()).forEach((o=>{t.push(_.object(e,o))})),t},getLogsText=e=>{const t=$(CANVAS_LOG);if(Number.isInteger(e)){if(t.length<=e)return;return t.eq(e).html()}return t.toArray().map((e=>$(e).html()))},getLogsTime=e=>{const t=$(CANVAS_LOG);if(Number.isInteger(e)){if(t.length<=e)return;const o=t.eq(e),n=(new Date).toLocaleDateString(),r=o.parent().attr("title");return new Date(`${n}, ${r}`)}return t.toArray().map(((e,t)=>getLogsTime(t)))},isBrowserTabFocused=()=>!document.hidden,isLocalStorageEnabled=()=>{try{const e=generateUUID();return window.localStorage.setItem(e,null),window.localStorage.removeItem(e),!0}catch(e){return!1}},isSessionStorageEnabled=()=>{try{const e=generateUUID();return window.sessionStorage.setItem(e,null),window.sessionStorage.removeItem(e),!0}catch(e){return!1}},prefersDarkColorScheme=()=>window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,prefersLightColorScheme=()=>window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,printHTML=e=>{e=e.replace(/<a href="([\w+:/.]+)">(?<=>)(.+?)(?=<)<\/a>/g,'<abbr title="Ctrl + Click"><a href="$1" target="_blank">$2</a></abbr>'),p.println(""),$(CANVAS_LOG).last().html(e)},printMD=e=>{let t,o,n="";function r(e,t){n+=`<${t?"/":""}${e}>`}for(let s=0;s<e.length;s++)switch(e[s]){case"*":r("b",t),t=!t;break;case"_":r("i",o),o=!o;break;case"[":try{const t=e.substr(s,e.length),o=t.match(/(?<=\[).+?(?=\])/)[0],r=t.match(/(?<=\().+?(?=\))/)[0];n+=`<a href="${r}">${o}</a>`,s+=o.length+r.length+3;break}catch(e){console.warn(`Markdown error: ${e}`)}break;default:n+=e[s]}printHTML(n)},removeElement=e=>{$(`#${e}`).remove()},__setCodeCallCount="undefined"!=typeof __setCodeCallCount?__setCodeCallCount:0,__setCodeLastCall="undefined"!=typeof __setCodeLastCall?__setCodeLastCall:0,setCode=e=>{if(_.isNumber(_set_code_limit_)&&(Date.now()-__setCodeLastCall<75?__setCodeCallCount++:__setCodeCallCount=0,__setCodeLastCall=Date.now()),__setCodeCallCount>_set_code_limit_)return console.warn("`setCode` limit reached. Set the `_set_code_limit_` flag to `false` to disable this functionality.");window.top.postMessage(JSON.stringify({code:e}))},setLog=(e,t,o=!0)=>{const n=$(CANVAS_LOG);if(n.length<=e)return;const r=n.eq(e);r.html(t),o&&r.parent().attr("title",(new Date).toLocaleTimeString())},unescapeHTML=e=>e.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,(e=>({"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[e]||e)));